<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://blog.cx985.top/technology/java/springcloud.html"><meta property="og:site_name" content="è¾°æ™¨æ²‰"><meta property="og:title" content="SpringCloud"><meta property="og:description" content="SpringCloud 1. springcloud å¯¹åº”çš„ç»„ä»¶ï¼Ÿ æœåŠ¡æ³¨å†Œå‘ç° nacos ï¼ˆcloud alibabaï¼‰ consul ï¼ˆcloudæœ€æ–°ï¼‰ eureka (æ·˜æ±°) è´Ÿè½½å‡è¡¡ LoadBalancer (cloudæœ€æ–°) ribbon (æ·˜æ±°) æœåŠ¡è°ƒç”¨ openFeign æ–­è·¯å™¨ CircuitBreaker ï¼ˆcloudæœ€æ–°ï¼‰ hystrix (æ·˜æ±°) ç½‘å…³ gateway åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª Sleuth(Micrometer) + ZipKin SpringCloud Alibaba Nacos æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ SpringCloud Alibaba Sentinel æœåŠ¡çš„ç†”æ–­å’Œé™æµ SpringCloud Alibaba Seata åˆ†å¸ƒå¼äº‹åŠ¡"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-04-14T13:53:44.000Z"><meta property="article:author" content="è¾°æ™¨æ²‰"><meta property="article:tag" content="springcloud"><meta property="article:published_time" content="2024-03-25T00:00:00.000Z"><meta property="article:modified_time" content="2024-04-14T13:53:44.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"SpringCloud","image":[""],"datePublished":"2024-03-25T00:00:00.000Z","dateModified":"2024-04-14T13:53:44.000Z","author":[{"@type":"Person","name":"è¾°æ™¨æ²‰"}]}</script><link rel="icon" href="/favicon.png"><link rel="icon" href="/pwa/512.png" type="image/png" sizes="512x512"><link rel="icon" href="/pwa/192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/pwa/144.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/pwa/144.png"><meta name="msapplication-TileColor" content="#000"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>SpringCloud | è¾°æ™¨æ²‰</title><meta name="description" content="SpringCloud 1. springcloud å¯¹åº”çš„ç»„ä»¶ï¼Ÿ æœåŠ¡æ³¨å†Œå‘ç° nacos ï¼ˆcloud alibabaï¼‰ consul ï¼ˆcloudæœ€æ–°ï¼‰ eureka (æ·˜æ±°) è´Ÿè½½å‡è¡¡ LoadBalancer (cloudæœ€æ–°) ribbon (æ·˜æ±°) æœåŠ¡è°ƒç”¨ openFeign æ–­è·¯å™¨ CircuitBreaker ï¼ˆcloudæœ€æ–°ï¼‰ hystrix (æ·˜æ±°) ç½‘å…³ gateway åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª Sleuth(Micrometer) + ZipKin SpringCloud Alibaba Nacos æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ SpringCloud Alibaba Sentinel æœåŠ¡çš„ç†”æ–­å’Œé™æµ SpringCloud Alibaba Seata åˆ†å¸ƒå¼äº‹åŠ¡">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-d11f43f1.css" as="style"><link rel="stylesheet" href="/assets/style-d11f43f1.css">
    <link rel="modulepreload" href="/assets/app-57970fd2.js"><link rel="modulepreload" href="/assets/springcloud.html-406a7520.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/springcloud.html-5ac65581.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar auto-hide"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="/pwa/144.png" alt="è¾°æ™¨æ²‰"><!----><span class="vp-site-name hide-in-pad">è¾°æ™¨æ²‰</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="æŠ€æœ¯"><span class="title"><span class="font-icon icon iconfont icon-jishufuwu" style=""></span>æŠ€æœ¯</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="JAVA" class="vp-link nav-link active nav-link active" href="/technology/java.html"><span class="font-icon icon iconfont icon-java" style=""></span>JAVA<!----></a></li><li class="dropdown-item"><a aria-label="å‰ç«¯" class="vp-link nav-link nav-link" href="/technology/frontend.html"><span class="font-icon icon iconfont icon-qianduan" style=""></span>å‰ç«¯<!----></a></li><li class="dropdown-item"><a aria-label="å¤§æ•°æ®" class="vp-link nav-link nav-link" href="/technology/bigdata.html"><span class="font-icon icon iconfont icon-dashuju" style=""></span>å¤§æ•°æ®<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ç®¡ç†"><span class="title"><span class="font-icon icon iconfont icon-yunyingguanli" style=""></span>ç®¡ç†</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="å…¨éƒ¨" class="vp-link nav-link nav-link" href="/article.html"><span class="font-icon icon iconfont icon-quanbu-copy" style=""></span>å…¨éƒ¨<!----></a></li><li class="dropdown-item"><a aria-label="åˆ†ç±»" class="vp-link nav-link nav-link" href="/category.html"><span class="font-icon icon iconfont icon-fenlei" style=""></span>åˆ†ç±»<!----></a></li><li class="dropdown-item"><a aria-label="æ ‡ç­¾" class="vp-link nav-link nav-link" href="/tag.html"><span class="font-icon icon iconfont icon-biaoqian" style=""></span>æ ‡ç­¾<!----></a></li><li class="dropdown-item"><a aria-label="æ—¶é—´è½´" class="vp-link nav-link nav-link" href="/timeline.html"><span class="font-icon icon iconfont icon-shijianzhou" style=""></span>æ—¶é—´è½´<!----></a></li><li class="dropdown-item"><a aria-label="é¡¹ç›®ç®¡ç†" class="vp-link nav-link nav-link" href="/manager.html"><span class="font-icon icon iconfont icon-xiangmuguanli" style=""></span>é¡¹ç›®ç®¡ç†<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="é¡¹ç›®"><span class="title"><span class="font-icon icon iconfont icon-xiangmu" style=""></span>é¡¹ç›®</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="éŸ³ä¹" class="vp-link nav-link nav-link" href="/project/music.html"><span class="font-icon icon iconfont icon-yinle" style=""></span>éŸ³ä¹<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a aria-label="ç”Ÿæ´»" class="vp-link nav-link nav-link" href="/life.html"><span class="font-icon icon iconfont icon-shenghuofuwu" style=""></span>ç”Ÿæ´»<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="å…³äº" class="vp-link nav-link nav-link" href="/about.html"><span class="font-icon icon iconfont icon-guanyuwo" style=""></span>å…³äº<!----></a></div></nav><!----><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="é¦–é¡µ" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/"><span class="font-icon icon iconfont icon-shouye" style=""></span>é¦–é¡µ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable active"><span class="font-icon icon iconfont icon-jishufuwu" style=""></span><a aria-label="æŠ€æœ¯" class="vp-link nav-link active vp-sidebar-title nav-link active vp-sidebar-title" href="/technology/"><!---->æŠ€æœ¯<!----></a><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-dashuju" style=""></span><span class="vp-sidebar-title">å¤§æ•°æ®</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-qianduan" style=""></span><span class="vp-sidebar-title">å‰ç«¯</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">JAVA</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="JAVAåŸºç¡€" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/javaBase.html"><span class="font-icon icon iconfont icon-jichu" style=""></span>JAVAåŸºç¡€<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="JAVAè¿›é˜¶" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/javaAdvanced.html"><span class="font-icon icon iconfont icon-jinjie" style=""></span>JAVAè¿›é˜¶<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="JAVAé›†åˆ" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/javaCollect.html"><span class="font-icon icon iconfont icon-jihe" style=""></span>JAVAé›†åˆ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="JUC" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/juc.html"><span class="font-icon icon iconfont icon-shujuchuli" style=""></span>JUC<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="jvm" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/jvm.html"><span class="font-icon icon iconfont icon-JVM" style=""></span>jvm<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="æ•°æ®åº“" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/mysql.html"><span class="font-icon icon iconfont icon-Database" style=""></span>æ•°æ®åº“<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Redis" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/redis.html"><span class="font-icon icon iconfont icon-Redis" style=""></span>Redis<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ES" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/es.html"><span class="font-icon icon iconfont icon-elasticsearch1" style=""></span>ES<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Spring+SpringBoot" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/spring.html"><span class="font-icon icon iconfont icon-bxl-spring-boot" style=""></span>Spring+SpringBoot<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="SpringCloud" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/technology/java/springcloud.html"><span class="font-icon icon iconfont icon-SpringCloud" style=""></span>SpringCloud<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. springcloud å¯¹åº”çš„ç»„ä»¶ï¼Ÿ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-springcloud-å¯¹åº”çš„ç»„ä»¶"><!---->1. springcloud å¯¹åº”çš„ç»„ä»¶ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. CAP&amp;BASEç†è®º" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_2-cap-baseç†è®º"><!---->2. CAP&amp;BASEç†è®º<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. CAP" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-cap"><!---->1. CAP<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. BASEç†è®º" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_2-baseç†è®º"><!---->2. BASEç†è®º<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3. SpringCloud Gateway" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_3-springcloud-gateway"><!---->3. SpringCloud Gateway<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. spring cloud gateway æ”¯æŒé™æµå—" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-spring-cloud-gateway-æ”¯æŒé™æµå—"><!---->1. spring cloud gateway æ”¯æŒé™æµå—<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4. åˆ†å¸ƒå¼ID" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_4-åˆ†å¸ƒå¼id"><!---->4. åˆ†å¸ƒå¼ID<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. é›ªèŠ±ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-é›ªèŠ±ç®—æ³•"><!---->1. é›ªèŠ±ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. ç¾å›¢å¶å­ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_2-ç¾å›¢å¶å­ç®—æ³•"><!---->2. ç¾å›¢å¶å­ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5. åˆ†å¸ƒå¼é”" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_5-åˆ†å¸ƒå¼é”"><!---->5. åˆ†å¸ƒå¼é”<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="6. åˆ†å¸ƒå¼äº‹åŠ¡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_6-åˆ†å¸ƒå¼äº‹åŠ¡"><!---->6. åˆ†å¸ƒå¼äº‹åŠ¡<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. 2PC 3PC TCCäº†è§£ä¹ˆ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-2pc-3pc-tccäº†è§£ä¹ˆ"><!---->1. 2PC 3PC TCCäº†è§£ä¹ˆ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="7. è´Ÿè½½å‡è¡¡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_7-è´Ÿè½½å‡è¡¡"><!---->7. è´Ÿè½½å‡è¡¡<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. è´Ÿè½½å‡è¡¡ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-è´Ÿè½½å‡è¡¡ç®—æ³•"><!---->1. è´Ÿè½½å‡è¡¡ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="8. æœåŠ¡é™æµ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_8-æœåŠ¡é™æµ"><!---->8. æœåŠ¡é™æµ<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. å›ºå®šçª—å£è®¡æ•°å™¨ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-å›ºå®šçª—å£è®¡æ•°å™¨ç®—æ³•"><!---->1. å›ºå®šçª—å£è®¡æ•°å™¨ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. æ»‘åŠ¨çª—å£è®¡æ•°å™¨ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_2-æ»‘åŠ¨çª—å£è®¡æ•°å™¨ç®—æ³•"><!---->2. æ»‘åŠ¨çª—å£è®¡æ•°å™¨ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.æ¼æ¡¶ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_3-æ¼æ¡¶ç®—æ³•"><!---->3.æ¼æ¡¶ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4. ä»¤ç‰Œæ¡¶ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_4-ä»¤ç‰Œæ¡¶ç®—æ³•"><!---->4. ä»¤ç‰Œæ¡¶ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="9 . openFeigin" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_9-openfeigin"><!---->9 . openFeigin<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. ä½¿ç”¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-ä½¿ç”¨"><!---->1. ä½¿ç”¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. è¶…æ—¶æ—¶é—´" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_2-è¶…æ—¶æ—¶é—´"><!---->2. è¶…æ—¶æ—¶é—´<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3. feignè°ƒç”¨çš„åº•å±‚åŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_3-feignè°ƒç”¨çš„åº•å±‚åŸç†"><!---->3. feignè°ƒç”¨çš„åº•å±‚åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4. feign ä¼˜åŒ–" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_4-feign-ä¼˜åŒ–"><!---->4. feign ä¼˜åŒ–<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="10 Hystrix" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_10-hystrix"><!---->10 Hystrix<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. æœåŠ¡é™çº§" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-æœåŠ¡é™çº§"><!---->1. æœåŠ¡é™çº§<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. æœåŠ¡ç†”æ–­" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_2-æœåŠ¡ç†”æ–­"><!---->2. æœåŠ¡ç†”æ–­<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3. æœåŠ¡é™æµ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_3-æœåŠ¡é™æµ"><!---->3. æœåŠ¡é™æµ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4. æ³¨è§£" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_4-æ³¨è§£"><!---->4. æ³¨è§£<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="11. sentinel" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_11-sentinel"><!---->11. sentinel<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. @SentinelResource" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-sentinelresource"><!---->1. @SentinelResource<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. é™æµè§„åˆ™" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_2-é™æµè§„åˆ™"><!---->2. é™æµè§„åˆ™<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="12 . Seata" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_12-seata"><!---->12 . Seata<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. ä½¿ç”¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-ä½¿ç”¨-1"><!---->1. ä½¿ç”¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. ä¸‰å¤§ç»„ä»¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_2-ä¸‰å¤§ç»„ä»¶"><!---->2. ä¸‰å¤§ç»„ä»¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3. åº•å±‚åŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_3-åº•å±‚åŸç†"><!---->3. åº•å±‚åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="13 . nacos" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_13-nacos"><!---->13 . nacos<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. nacosçš„å¿ƒè·³æœºåˆ¶ï¼Ÿ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-nacosçš„å¿ƒè·³æœºåˆ¶"><!---->1. nacosçš„å¿ƒè·³æœºåˆ¶ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. nacosæœåŠ¡æ³¨å†Œå‘ç°çš„åŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_2-nacosæœåŠ¡æ³¨å†Œå‘ç°çš„åŸç†"><!---->2. nacosæœåŠ¡æ³¨å†Œå‘ç°çš„åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3. nacosåŠ¨æ€åˆ·æ–°åº•å±‚å®ç°" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_3-nacosåŠ¨æ€åˆ·æ–°åº•å±‚å®ç°"><!---->3. nacosåŠ¨æ€åˆ·æ–°åº•å±‚å®ç°<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="14. xxl-job" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_14-xxl-job"><!---->14. xxl-job<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.xxl-job å’Œelastic-jobçš„åŒºåˆ«" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-xxl-job-å’Œelastic-jobçš„åŒºåˆ«"><!---->1.xxl-job å’Œelastic-jobçš„åŒºåˆ«<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. xxl-jobæ˜¯å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼ä¸‹åªæœ‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„ï¼ŒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_2-xxl-jobæ˜¯å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼ä¸‹åªæœ‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„-åŸç†æ˜¯ä»€ä¹ˆ"><!---->2. xxl-jobæ˜¯å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼ä¸‹åªæœ‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„ï¼ŒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15. skywalking åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_15-skywalking-åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„"><!---->15. skywalking åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. skywalking åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/java/springcloud.html#_1-skywalking-åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„"><!---->1. skywalking åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a aria-label="kafka" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.html"><span class="font-icon icon iconfont icon-SpringCloud" style=""></span>kafka<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¡ç®—æœºåŸºç¡€" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/computerBase.html"><span class="font-icon icon iconfont icon-jichu" style=""></span>è®¡ç®—æœºåŸºç¡€<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="æ•°æ®ç»“æ„å’Œç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/java/algorithm.html"><span class="font-icon icon iconfont icon-suanfaku" style=""></span>æ•°æ®ç»“æ„å’Œç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-xiangmu" style=""></span><a aria-label="é¡¹ç›®" class="vp-link nav-link vp-sidebar-title nav-link vp-sidebar-title" href="/project/"><!---->é¡¹ç›®<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="éŸ³ä¹" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/project/music/"><span class="font-icon icon iconfont icon-yinle" style=""></span>éŸ³ä¹<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-shenghuofuwu" style=""></span><a aria-label="ç”Ÿæ´»" class="vp-link nav-link vp-sidebar-title nav-link vp-sidebar-title" href="/life/"><!---->ç”Ÿæ´»<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="ç›¸æœº" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/life/%E7%9B%B8%E6%9C%BA.html"><span class="font-icon icon iconfont icon-zhaoxiangji" style=""></span>ç›¸æœº<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="äººåƒæ‘„å½±" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/life/%E4%BA%BA%E5%83%8F%E6%91%84%E5%BD%B1.html"><span class="font-icon icon iconfont icon-renxiangsheying" style=""></span>äººåƒæ‘„å½±<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="PS" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/life/PS.html"><span class="font-icon icon iconfont icon-ps" style=""></span>PS<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-guanyuwo" style=""></span><a aria-label="å…³äº" class="vp-link nav-link vp-sidebar-title nav-link vp-sidebar-title" href="/about/"><!---->å…³äº<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="ç•™è¨€æ¿" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/about/guestbook.html"><span class="font-icon icon iconfont icon-liuyanban-05" style=""></span>ç•™è¨€æ¿<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="æˆ‘" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/about/me.html"><span class="font-icon icon iconfont icon-wode" style=""></span>æˆ‘<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-SpringCloud" style=""></span>SpringCloud</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">è¾°æ™¨æ²‰</span></span><span property="author" content="è¾°æ™¨æ²‰"></span></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category5 clickable" role="navigation">springcloud</span><!--]--><meta property="articleSection" content="springcloud"></span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-03-25T00:00:00.000Z"></span><!----><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag5 clickable" role="navigation">springcloud</span><!--]--><meta property="keywords" content="springcloud"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 26 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT26M"></span><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 7948 å­—</span><meta property="wordCount" content="7948"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/technology/java/springcloud.html">...</span></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_1-springcloud-å¯¹åº”çš„ç»„ä»¶">1. springcloud å¯¹åº”çš„ç»„ä»¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_2-cap-baseç†è®º">2. CAP&amp;BASEç†è®º</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-cap">1. CAP</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-baseç†è®º">2. BASEç†è®º</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_3-springcloud-gateway">3. SpringCloud Gateway</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-spring-cloud-gateway-æ”¯æŒé™æµå—">1. spring cloud gateway æ”¯æŒé™æµå—</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_4-åˆ†å¸ƒå¼id">4. åˆ†å¸ƒå¼ID</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-é›ªèŠ±ç®—æ³•">1. é›ªèŠ±ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-ç¾å›¢å¶å­ç®—æ³•">2. ç¾å›¢å¶å­ç®—æ³•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_5-åˆ†å¸ƒå¼é”">5. åˆ†å¸ƒå¼é”</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_6-åˆ†å¸ƒå¼äº‹åŠ¡">6. åˆ†å¸ƒå¼äº‹åŠ¡</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-2pc-3pc-tccäº†è§£ä¹ˆ">1. 2PC 3PC TCCäº†è§£ä¹ˆ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_7-è´Ÿè½½å‡è¡¡">7. è´Ÿè½½å‡è¡¡</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-è´Ÿè½½å‡è¡¡ç®—æ³•">1. è´Ÿè½½å‡è¡¡ç®—æ³•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_8-æœåŠ¡é™æµ">8. æœåŠ¡é™æµ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-å›ºå®šçª—å£è®¡æ•°å™¨ç®—æ³•">1. å›ºå®šçª—å£è®¡æ•°å™¨ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-æ»‘åŠ¨çª—å£è®¡æ•°å™¨ç®—æ³•">2. æ»‘åŠ¨çª—å£è®¡æ•°å™¨ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-æ¼æ¡¶ç®—æ³•">3.æ¼æ¡¶ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4-ä»¤ç‰Œæ¡¶ç®—æ³•">4. ä»¤ç‰Œæ¡¶ç®—æ³•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_9-openfeigin">9 . openFeigin</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-ä½¿ç”¨">1. ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-è¶…æ—¶æ—¶é—´">2. è¶…æ—¶æ—¶é—´</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-feignè°ƒç”¨çš„åº•å±‚åŸç†">3. feignè°ƒç”¨çš„åº•å±‚åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4-feign-ä¼˜åŒ–">4. feign ä¼˜åŒ–</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_10-hystrix">10 Hystrix</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-æœåŠ¡é™çº§">1. æœåŠ¡é™çº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-æœåŠ¡ç†”æ–­">2. æœåŠ¡ç†”æ–­</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-æœåŠ¡é™æµ">3. æœåŠ¡é™æµ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4-æ³¨è§£">4. æ³¨è§£</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_11-sentinel">11. sentinel</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-sentinelresource">1. @SentinelResource</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-é™æµè§„åˆ™">2. é™æµè§„åˆ™</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_12-seata">12 . Seata</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-ä½¿ç”¨-1">1. ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-ä¸‰å¤§ç»„ä»¶">2. ä¸‰å¤§ç»„ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-åº•å±‚åŸç†">3. åº•å±‚åŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_13-nacos">13 . nacos</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-nacosçš„å¿ƒè·³æœºåˆ¶">1. nacosçš„å¿ƒè·³æœºåˆ¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-nacosæœåŠ¡æ³¨å†Œå‘ç°çš„åŸç†">2. nacosæœåŠ¡æ³¨å†Œå‘ç°çš„åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-nacosåŠ¨æ€åˆ·æ–°åº•å±‚å®ç°">3. nacosåŠ¨æ€åˆ·æ–°åº•å±‚å®ç°</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_14-xxl-job">14. xxl-job</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-xxl-job-å’Œelastic-jobçš„åŒºåˆ«">1.xxl-job å’Œelastic-jobçš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-xxl-jobæ˜¯å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼ä¸‹åªæœ‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„-åŸç†æ˜¯ä»€ä¹ˆ">2. xxl-jobæ˜¯å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼ä¸‹åªæœ‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„ï¼ŒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_15-skywalking-åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„">15. skywalking åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-skywalking-åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„">1. skywalking åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="springcloud" tabindex="-1"><a class="header-anchor" href="#springcloud" aria-hidden="true">#</a> SpringCloud</h1><h2 id="_1-springcloud-å¯¹åº”çš„ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-springcloud-å¯¹åº”çš„ç»„ä»¶" aria-hidden="true">#</a> 1. springcloud å¯¹åº”çš„ç»„ä»¶ï¼Ÿ</h2><ul><li><p>æœåŠ¡æ³¨å†Œå‘ç°</p><ul><li>nacos ï¼ˆcloud alibabaï¼‰</li><li>consul ï¼ˆcloudæœ€æ–°ï¼‰</li><li>eureka (æ·˜æ±°)</li></ul></li><li><p>è´Ÿè½½å‡è¡¡</p><ul><li>LoadBalancer (cloudæœ€æ–°)</li><li>ribbon (æ·˜æ±°)</li></ul></li><li><p>æœåŠ¡è°ƒç”¨</p><ul><li>openFeign</li></ul></li><li><p>æ–­è·¯å™¨</p><ul><li>CircuitBreaker ï¼ˆcloudæœ€æ–°ï¼‰</li><li>hystrix (æ·˜æ±°)</li></ul></li><li><p>ç½‘å…³</p><ul><li>gateway</li></ul></li><li><p>åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª</p><ul><li>Sleuth(Micrometer) + ZipKin</li></ul></li><li><p>SpringCloud Alibaba Nacos</p><ul><li>æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ</li></ul></li><li><p>SpringCloud Alibaba Sentinel</p><ul><li>æœåŠ¡çš„ç†”æ–­å’Œé™æµ</li></ul></li><li><p>SpringCloud Alibaba Seata</p><ul><li>åˆ†å¸ƒå¼äº‹åŠ¡</li></ul></li></ul><h2 id="_2-cap-baseç†è®º" tabindex="-1"><a class="header-anchor" href="#_2-cap-baseç†è®º" aria-hidden="true">#</a> 2. CAP&amp;BASEç†è®º</h2><h3 id="_1-cap" tabindex="-1"><a class="header-anchor" href="#_1-cap" aria-hidden="true">#</a> 1. CAP</h3><ul><li><p>Consistency</p><ul><li>ä¸€è‡´æ€§</li><li>æ‰€æœ‰èŠ‚ç‚¹è®¿é—®åŒä¸€ä»½æœ€æ–°çš„æ•°æ®å‰¯æœ¬</li></ul></li><li><p>Availability</p><ul><li>å¯ç”¨æ€§</li><li>éæ•…éšœçš„èŠ‚ç‚¹åœ¨åˆç†çš„æ—¶é—´å†…è¿”å›åˆç†çš„å“åº”</li></ul></li><li><p>Partition Tolerance</p><ul><li>åˆ†åŒºå®¹é”™æ€§</li><li>åˆ†å¸ƒå¼ç³»ç»Ÿå‡ºç°ç½‘ç»œåˆ†åŒºçš„æ—¶å€™ï¼Œä»ç„¶èƒ½å¤Ÿå¯¹å¤–æä¾›æœåŠ¡</li></ul></li><li><p><strong>CAP ç†è®ºä¸­åˆ†åŒºå®¹é”™æ€§ P æ˜¯ä¸€å®šè¦æ»¡è¶³çš„ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œåªèƒ½æ»¡è¶³å¯ç”¨æ€§ A æˆ–è€…ä¸€è‡´æ€§ C</strong></p></li><li><p>å¸¸è§æ³¨å†Œä¸­å¿ƒ</p><ul><li>zookeeperä¿è¯çš„æ˜¯cp <ul><li>ä»»ä½•æ—¶åˆ»å¯¹ ZooKeeper çš„è¯»è¯·æ±‚éƒ½èƒ½å¾—åˆ°ä¸€è‡´æ€§çš„ç»“æœ</li><li>zookeeper ä¸ä¿è¯æ¯æ¬¡è¯·æ±‚çš„å¯ç”¨æ€§</li></ul></li><li>eurekaä¿è¯çš„æ˜¯ap <ul><li>Eureka ä¿è¯å³ä½¿å¤§éƒ¨åˆ†èŠ‚ç‚¹æŒ‚æ‰ä¹Ÿä¸ä¼šå½±å“æ­£å¸¸æä¾›æœåŠ¡ï¼Œåªè¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¯ç”¨çš„å°±è¡Œäº†</li></ul></li><li>nacos æ”¯æŒapå’Œcp</li></ul></li></ul><h3 id="_2-baseç†è®º" tabindex="-1"><a class="header-anchor" href="#_2-baseç†è®º" aria-hidden="true">#</a> 2. BASEç†è®º</h3><ul><li>Basically Available <ul><li>åŸºæœ¬å¯ç”¨</li><li>åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°ä¸å¯é¢„çŸ¥æ•…éšœçš„æ—¶å€™ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ã€‚ä½†æ˜¯ï¼Œè¿™ç»ä¸ç­‰ä»·äºç³»ç»Ÿä¸å¯ç”¨</li></ul></li><li>Soft-state <ul><li>è½¯çŠ¶æ€</li><li>å…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼ˆ<strong>CAP ç†è®ºä¸­çš„æ•°æ®ä¸ä¸€è‡´</strong>ï¼‰ï¼Œå¹¶è®¤ä¸ºè¯¥ä¸­é—´çŠ¶æ€çš„å­˜åœ¨ä¸ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“å¯ç”¨æ€§ï¼Œå³å…è®¸ç³»ç»Ÿåœ¨ä¸åŒèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬ä¹‹é—´è¿›è¡Œæ•°æ®åŒæ­¥çš„è¿‡ç¨‹å­˜åœ¨å»¶æ—¶</li></ul></li><li>Eventually Consistent <ul><li>æœ€ç»ˆä¸€è‡´æ€§</li><li>æœ€ç»ˆä¸€è‡´æ€§å¼ºè°ƒçš„æ˜¯ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ•°æ®å‰¯æœ¬ï¼Œåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„åŒæ­¥åï¼Œæœ€ç»ˆèƒ½å¤Ÿè¾¾åˆ°ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€</li></ul></li><li>æ ¸å¿ƒæ€æƒ³ <ul><li>å³ä½¿æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼Œä½†æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥æ ¹æ®è‡ªèº«ä¸šåŠ¡ç‰¹ç‚¹ï¼Œé‡‡ç”¨é€‚å½“çš„æ–¹å¼æ¥ä½¿ç³»ç»Ÿè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§</li></ul></li></ul><h2 id="_3-springcloud-gateway" tabindex="-1"><a class="header-anchor" href="#_3-springcloud-gateway" aria-hidden="true">#</a> 3. SpringCloud Gateway</h2><h3 id="_1-spring-cloud-gateway-æ”¯æŒé™æµå—" tabindex="-1"><a class="header-anchor" href="#_1-spring-cloud-gateway-æ”¯æŒé™æµå—" aria-hidden="true">#</a> 1. spring cloud gateway æ”¯æŒé™æµå—</h3><ul><li><p>æ”¯æŒï¼Œé™æµæ˜¯ä¸€ç§å¸¸è§çš„å¾®æœåŠ¡ç½‘å…³åŠŸèƒ½ï¼Œç”¨äºæ§åˆ¶å¯¹åç«¯æœåŠ¡çš„è¯·æ±‚æµé‡ï¼Œä»¥é˜²æ­¢è¿‡è½½å’Œä¿æŠ¤åç«¯æœåŠ¡</p></li><li><p>å†…ç½®çš„é™æµè¿‡æ»¤å™¨æ˜¯åŸºäºä»¤ç‰Œæ¡¶ç®—æ³•æˆ–æ¼æ¡¶ç®—æ³•å®ç°çš„</p><ul><li>ä»¤ç‰Œæ¡¶ç®—æ³•ï¼šå…è®¸ä¸€å®šçš„çªå‘æµé‡</li><li>æ¼æ¡¶ç®—æ³•åˆ™å¯ä»¥å¹³æ»‘è¯·æ±‚æµé‡</li></ul></li><li><p>å®ç°</p><ul><li><p>æ–¹æ³•ä¸€</p><ul><li><p>ä½¿ç”¨RequestRateLimiterGatewayFilterFactoryæ¥é…ç½®åŸºäºä»¤ç‰Œæ¡¶ç®—æ³•çš„é™æµç­–ç•¥</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> my_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.org
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/foo/<span class="token important">**</span>
          <span class="token key atrule">filters</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> RequestRateLimiter
              <span class="token key atrule">args</span><span class="token punctuation">:</span>
                <span class="token key atrule">key-resolver</span><span class="token punctuation">:</span> <span class="token string">&quot;#{@userKeyResolver}&quot;</span>
                <span class="token key atrule">redis-rate-limiter.replenishRate</span><span class="token punctuation">:</span> <span class="token number">1</span>
                <span class="token key atrule">redis-rate-limiter.burstCapacity</span><span class="token punctuation">:</span> <span class="token number">3</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>æ–¹æ³•äºŒ</p><ul><li><p>è‡ªå®šä¹‰é™æµè¿‡æ»¤å™¨ï¼Œå®ç°GatewayFilteræ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomRateLimiterFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GatewayFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®ç°é™æµé€»è¾‘</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li></ul><h2 id="_4-åˆ†å¸ƒå¼id" tabindex="-1"><a class="header-anchor" href="#_4-åˆ†å¸ƒå¼id" aria-hidden="true">#</a> 4. åˆ†å¸ƒå¼ID</h2><h3 id="_1-é›ªèŠ±ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_1-é›ªèŠ±ç®—æ³•" aria-hidden="true">#</a> 1. é›ªèŠ±ç®—æ³•</h3><p>é›ªèŠ±ç®—æ³•ï¼ˆSnowflakeï¼‰æ˜¯ä¸€ç§åˆ†å¸ƒå¼å”¯ä¸€IDç”Ÿæˆç®—æ³•ï¼Œå®ƒçš„å®ç°åŸç†æ˜¯åŸºäºTwitterçš„Snowflakeç®—æ³•ã€‚Snowflakeç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¸€ä¸ª64ä½çš„æ•´æ•°IDåˆ†æˆä¸‰éƒ¨åˆ†ï¼šæ—¶é—´æˆ³ã€æœºå™¨IDå’Œåºåˆ—å·ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p><ol><li><p>æ—¶é—´æˆ³éƒ¨åˆ†ï¼ˆ41ä½ï¼‰ï¼šè®°å½•ç”ŸæˆIDçš„æ—¶é—´ï¼Œç²¾ç¡®åˆ°æ¯«ç§’çº§ï¼Œå¯ä»¥ç”¨69å¹´ã€‚</p></li><li><p>æœºå™¨IDéƒ¨åˆ†ï¼ˆ10ä½ï¼‰ï¼šè®°å½•æœºå™¨çš„IDï¼Œå¯ä»¥åˆ†é…1024å°æœºå™¨ã€‚</p></li><li><p>åºåˆ—å·éƒ¨åˆ†ï¼ˆ12ä½ï¼‰ï¼šè®°å½•åŒä¸€æ¯«ç§’å†…ç”Ÿæˆçš„IDåºå·ï¼Œå¯ä»¥ç”Ÿæˆ4096ä¸ªIDã€‚</p></li></ol><p>Snowflakeç®—æ³•çš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p>åˆ†å¸ƒå¼å”¯ä¸€æ€§ï¼šæ¯ä¸ªIDéƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¸”å¯ä»¥åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç”Ÿæˆã€‚</p></li><li><p>é«˜æ€§èƒ½ï¼šç”ŸæˆIDçš„é€Ÿåº¦å¾ˆå¿«ï¼Œä¸ä¼šå½±å“ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p></li><li><p>ç®€å•æ˜“ç”¨ï¼šSnowflakeç®—æ³•çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥è½»æ¾é›†æˆåˆ°å„ç§ç³»ç»Ÿä¸­ã€‚</p></li></ol><p>Snowflakeç®—æ³•çš„ç¼ºç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p>æ—¶é’Ÿå›æ‹¨é—®é¢˜ï¼šå¦‚æœç³»ç»Ÿæ—¶é’Ÿå‘ç”Ÿå›æ‹¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç”Ÿæˆçš„IDä¸å”¯ä¸€ã€‚</p></li><li><p>ä¾èµ–æœºå™¨IDï¼šéœ€è¦ä¸ºæ¯å°æœºå™¨åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„IDï¼Œå¦‚æœæœºå™¨æ•°é‡è¿‡å¤šä¼šå¢åŠ ç®¡ç†æˆæœ¬ã€‚</p></li><li><p>æœ‰é™çš„æ—¶é—´èŒƒå›´ï¼šç”±äºæ—¶é—´æˆ³éƒ¨åˆ†åªæœ‰41ä½ï¼Œæ‰€ä»¥Snowflakeç®—æ³•èƒ½å¤Ÿä½¿ç”¨çš„æ—¶é—´èŒƒå›´æ˜¯æœ‰é™çš„ã€‚</p></li></ol><p>æ€»çš„æ¥è¯´ï¼Œé›ªèŠ±ç®—æ³•æ˜¯ä¸€ç§ç®€å•é«˜æ•ˆçš„åˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œé€‚ç”¨äºå¤§å¤šæ•°åˆ†å¸ƒå¼ç³»ç»Ÿã€‚ä½†åœ¨å®é™…åº”ç”¨ä¸­éœ€è¦æ³¨æ„æ—¶é’Ÿå›æ‹¨é—®é¢˜å’Œæœºå™¨IDçš„ç®¡ç†ã€‚</p><h3 id="_2-ç¾å›¢å¶å­ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_2-ç¾å›¢å¶å­ç®—æ³•" aria-hidden="true">#</a> 2. ç¾å›¢å¶å­ç®—æ³•</h3><ul><li>leaf- è§£å†³äº†é›ªèŠ±ç®—æ³•æ—¶é’Ÿå›æ‹¨é—®é¢˜</li></ul><h2 id="_5-åˆ†å¸ƒå¼é”" tabindex="-1"><a class="header-anchor" href="#_5-åˆ†å¸ƒå¼é”" aria-hidden="true">#</a> 5. åˆ†å¸ƒå¼é”</h2><ul><li>redisson</li></ul><h2 id="_6-åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_6-åˆ†å¸ƒå¼äº‹åŠ¡" aria-hidden="true">#</a> 6. åˆ†å¸ƒå¼äº‹åŠ¡</h2><h3 id="_1-2pc-3pc-tccäº†è§£ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_1-2pc-3pc-tccäº†è§£ä¹ˆ" aria-hidden="true">#</a> 1. 2PC 3PC TCCäº†è§£ä¹ˆ</h3><ul><li><p>2pc</p><ul><li><p>ä¸¤é˜¶æ®µæäº¤ï¼Œå°†äº‹åŠ¡çš„æäº¤è¿‡ç¨‹åˆ†ä¸ºèµ„æºå‡†å¤‡å’Œèµ„æºæäº¤æäº¤ä¸¤ä¸ªé˜¶æ®µï¼Œå¹¶ä¸”ç”±äº‹åŠ¡åè°ƒè€…æ¥åè°ƒæ‰€æœ‰äº‹ç‰©å‚ä¸è€…ï¼›å¦‚æœå‡†å¤‡é˜¶æ®µæ‰€æœ‰äº‹ç‰©å‚ä¸è€…éƒ½é¢„ç•™èµ„æºæˆåŠŸï¼Œåˆ™è¿›è¡Œç¬¬äºŒé˜¶æ®µçš„èµ„æºæäº¤ï¼Œå¦åˆ™äº‹ç‰©åè°ƒè€…å›æ»šèµ„æº</p></li><li><p>ç¬¬ä¸€é˜¶æ®µï¼šå‡†å¤‡é˜¶æ®µ</p></li><li><p>ç¬¬äºŒé˜¶æ®µï¼šæäº¤é˜¶æ®µ</p><ul><li>äº‹ç‰©çš„æäº¤</li><li>äº‹ç‰©çš„å›æ»š</li></ul></li><li><p>ç¼ºç‚¹</p><ul><li>æ€§èƒ½é—®é¢˜</li><li>å¯é æ€§é—®é¢˜</li><li>æ•°æ®ä¸€è‡´æ€§é—®é¢˜</li><li>äºŒé˜¶æ®µæ— æ³•è§£å†³çš„é—®é¢˜ <ul><li>åè°ƒè€…åœ¨å‘å‡º commit æ¶ˆæ¯ä¹‹åå®•æœºï¼Œè€Œå”¯ä¸€æ¥æ”¶åˆ°è¿™æ¡æ¶ˆæ¯çš„å‚ä¸è€…åŒæ—¶ä¹Ÿå®•æœºäº†ï¼Œé‚£ä¹ˆå³ä½¿åè°ƒè€…é€šè¿‡é€‰ä¸¾åè®®äº§ç”Ÿäº†æ–°çš„åè°ƒè€…ï¼Œè¿™æ¡äº‹åŠ¡çš„çŠ¶æ€ä¹Ÿæ˜¯ä¸ç¡®å®šçš„ï¼Œæ²¡äººçŸ¥é“äº‹åŠ¡æ˜¯å¦è¢«å·²ç»æäº¤</li></ul></li></ul></li></ul></li><li><p>3pc</p><ul><li><p>ä¸‰é˜¶æ®µæäº¤åè®®</p></li><li><p>å¯¹2pcçš„æ”¹è¿›ï¼Œåœ¨ç¬¬ä¸€é˜¶æ®µå’Œç¬¬äºŒé˜¶æ®µä¸­æ’å…¥äº†ä¸€ä¸ªå‡†å¤‡é˜¶æ®µ</p></li><li><p>åœ¨åè°ƒè€…å’Œå‚ä¸è€…ä¸­å¼•å…¥è¶…æ—¶æœºåˆ¶</p></li><li><p>3pcä¼šåˆ†ä¸º3ä¸ªé˜¶æ®µ</p><ul><li>å‡†å¤‡é˜¶æ®µ</li><li>é¢„æäº¤é˜¶æ®µ <ul><li>æ‰§è¡Œäº‹åŠ¡</li><li>æˆ–è€…ä¸­æ–­äº‹åŠ¡</li></ul></li><li>æäº¤é˜¶æ®µ <ul><li>æäº¤äº‹åŠ¡</li><li>æˆ–è€…ä¸­æ–­äº‹åŠ¡</li></ul></li></ul></li><li><p>ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ <ul><li>é™ä½äº†é˜»å¡èŒƒå›´ï¼Œå¹¶ä¸”åœ¨ç­‰å¾…è¶…æ—¶åï¼Œåè°ƒè€…æˆ–å‚ä¸è€…ä¼šä¸­æ–­äº‹åŠ¡ï¼Œé¿å…äº†åè°ƒè€…å•ç‚¹é—®é¢˜ï¼Œ</li></ul></li><li>ç¼ºç‚¹ <ul><li>æ•°æ®ä¸ä¸€è‡´é—®é¢˜ä¾ç„¶å­˜åœ¨</li></ul></li></ul></li></ul></li><li><p>TCC</p><ul><li><p>å…¨ç§°ï¼šTry Confirm Cancelï¼›æ˜¯åº”ç”¨å±‚çš„ä¸¤é˜¶æ®µæäº¤</p></li><li><p>æ ¸å¿ƒæ€æƒ³</p><ul><li>é’ˆå¯¹æ¯ä¸ªæ“ä½œï¼Œéƒ½è¦å®ç°å¯¹åº”çš„ç¡®è®¤å’Œè¡¥å¿æ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¸šåŠ¡é€»è¾‘çš„æ¯ä¸ªåˆ†æ”¯éƒ½éœ€è¦å®ç°tryã€confirmã€cancelä¸‰ä¸ªæ“ä½œ</li></ul></li><li><p>tccçš„æ‰§è¡Œæµç¨‹å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ</p><ul><li>ç¬¬ä¸€é˜¶æ®µ <ul><li>try: ä¸šåŠ¡ç³»ç»Ÿåšæ£€æµ‹å¹¶é¢„ç•™èµ„æºï¼Œæ¯”å¦‚å¸¸è§çš„ä¸‹å•ï¼Œåœ¨tryé˜¶æ®µæ˜¯å°†ä¸‹å•çš„åº“å­˜ç»™é”ä½</li></ul></li><li>ç¬¬äºŒé˜¶æ®µ <ul><li>æ ¹æ®ç¬¬ä¸€é˜¶æ®µçš„ç»“æœå†³å®šæ˜¯æ‰§è¡Œconfirmè¿˜æ˜¯cancel</li><li>cnonfirm : æ‰§è¡ŒçœŸæ­£çš„ä¸šåŠ¡</li><li>cancle: æ˜¯å¯¹tryé˜¶æ®µé¢„ç•™èµ„æºçš„é‡Šæ”¾ï¼ˆå‡ºé—®é¢˜ï¼Œé‡Šæ”¾é”ï¼‰</li></ul></li></ul></li></ul></li></ul><h2 id="_7-è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#_7-è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> 7. è´Ÿè½½å‡è¡¡</h2><h3 id="_1-è´Ÿè½½å‡è¡¡ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_1-è´Ÿè½½å‡è¡¡ç®—æ³•" aria-hidden="true">#</a> 1. è´Ÿè½½å‡è¡¡ç®—æ³•</h3><ul><li>éšæœºæ³•</li><li>è½®è¯¢</li><li>åŠ æƒè½®è¯¢</li><li>åŠ æƒéšæœº</li><li>æœ€å°å¹¶å‘è¿æ¥</li><li>å“ˆå¸Œç®—æ³•</li></ul><h2 id="_8-æœåŠ¡é™æµ" tabindex="-1"><a class="header-anchor" href="#_8-æœåŠ¡é™æµ" aria-hidden="true">#</a> 8. æœåŠ¡é™æµ</h2><h3 id="_1-å›ºå®šçª—å£è®¡æ•°å™¨ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_1-å›ºå®šçª—å£è®¡æ•°å™¨ç®—æ³•" aria-hidden="true">#</a> 1. å›ºå®šçª—å£è®¡æ•°å™¨ç®—æ³•</h3><ul><li>å›ºå®šçª—å£å…¶å®å°±æ˜¯æ—¶é—´çª—å£ï¼Œå›ºå®šçª—å£è®¡æ•°å™¨ç®—æ³•è§„å®šäº†å•ä½æ—¶é—´å¤„ç†çš„è¯·æ±‚æ•°é‡</li><li>ä¸æ¨èä½¿ç”¨ï¼Œä½“éªŒå·®</li></ul><h3 id="_2-æ»‘åŠ¨çª—å£è®¡æ•°å™¨ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_2-æ»‘åŠ¨çª—å£è®¡æ•°å™¨ç®—æ³•" aria-hidden="true">#</a> 2. æ»‘åŠ¨çª—å£è®¡æ•°å™¨ç®—æ³•</h3><ul><li>æ˜¯å›ºå®šçª—å£è®¡æ•°å™¨çš„å‡çº§ç‰ˆ</li><li>å®ƒæŠŠæ—¶é—´ä»¥ä¸€å®šæ¯”ä¾‹åˆ†é…</li><li>å½“æ»‘åŠ¨çª—å£çš„æ ¼å­åˆ’åˆ†çš„è¶Šå¤šï¼Œæ»‘åŠ¨çª—å£çš„æ»šåŠ¨å°±è¶Šå¹³æ»‘ï¼Œé™æµçš„ç»Ÿè®¡å°±ä¼šè¶Šç²¾å‡†</li></ul><h3 id="_3-æ¼æ¡¶ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_3-æ¼æ¡¶ç®—æ³•" aria-hidden="true">#</a> 3.æ¼æ¡¶ç®—æ³•</h3><ul><li>æˆ‘ä»¬å¯ä»¥æŠŠå‘è¯·æ±‚çš„åŠ¨ä½œæ¯”ä½œæˆæ³¨æ°´åˆ°æ¡¶ä¸­ï¼Œæˆ‘ä»¬å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹å¯ä»¥æ¯”å–»ä¸ºæ¼æ¡¶æ¼æ°´ã€‚æˆ‘ä»¬å¾€æ¡¶ä¸­ä»¥ä»»æ„é€Ÿç‡æµå…¥æ°´ï¼Œä»¥ä¸€å®šé€Ÿç‡æµå‡ºæ°´ã€‚å½“æ°´è¶…è¿‡æ¡¶æµé‡åˆ™ä¸¢å¼ƒï¼Œå› ä¸ºæ¡¶å®¹é‡æ˜¯ä¸å˜çš„ï¼Œä¿è¯äº†æ•´ä½“çš„é€Ÿç‡</li><li>æ¼æ¡¶ç®—æ³•å¼ºåˆ¶é™åˆ¶æ•°æ®çš„ä¼ è¾“é€Ÿç‡ï¼Œä½¿å…¶ä¿æŒç¨³å®šï¼Œä¸å…è®¸çªå‘æµé‡ï¼Œå³æ— è®ºç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›å¦‚ä½•ï¼Œæµå‡ºé€Ÿç‡æ€»æ˜¯ç¨³å®šçš„ï¼Œæ— æ³•å¤„ç†è¶…è¿‡é¢„è®¾é€Ÿç‡çš„çªå‘è¯·æ±‚</li></ul><h3 id="_4-ä»¤ç‰Œæ¡¶ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_4-ä»¤ç‰Œæ¡¶ç®—æ³•" aria-hidden="true">#</a> 4. ä»¤ç‰Œæ¡¶ç®—æ³•</h3><ol><li><p>åŸºæœ¬åŸç†ï¼š</p><ul><li>ä»¤ç‰Œæ¡¶ç®—æ³•ç»´æŠ¤ä¸€ä¸ªå›ºå®šå®¹é‡çš„æ¡¶ï¼Œæ¡¶ä¸­ä»¥å›ºå®šé€Ÿç‡ç”Ÿæˆä»¤ç‰Œï¼Œæ¯ä¸ªä»¤ç‰Œä»£è¡¨ä¸€ä¸ªè¯·æ±‚çš„å¤„ç†æƒé™ã€‚</li><li>å½“è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œéœ€è¦ä»æ¡¶ä¸­è·å–ä¸€ä¸ªä»¤ç‰Œï¼Œå¦‚æœæ¡¶ä¸­æœ‰è¶³å¤Ÿçš„ä»¤ç‰Œï¼Œåˆ™å…è®¸å¤„ç†è¯¥è¯·æ±‚ï¼›å¦‚æœæ¡¶ä¸­æ²¡æœ‰è¶³å¤Ÿçš„ä»¤ç‰Œï¼Œåˆ™æ‹’ç»è¯¥è¯·æ±‚æˆ–è€…å°†è¯·æ±‚æ”¾å…¥é˜Ÿåˆ—ä¸­ç­‰å¾…ä»¤ç‰Œã€‚</li><li>æ¡¶ä¸­çš„ä»¤ç‰Œæ•°é‡æœ‰ä¸Šé™ï¼Œå¦‚æœæ¡¶æ»¡äº†ï¼Œæ–°ç”Ÿæˆçš„ä»¤ç‰Œå°†è¢«ä¸¢å¼ƒã€‚</li></ul></li><li><p>å®ç°é™æµçš„è®¾è®¡è¿‡ç¨‹ï¼š</p><ul><li>åˆå§‹åŒ–ä»¤ç‰Œæ¡¶ï¼Œè®¾ç½®æ¡¶çš„å®¹é‡å’Œä»¤ç‰Œç”Ÿæˆé€Ÿç‡ã€‚</li><li>å®šæ—¶ä»¥å›ºå®šé€Ÿç‡å‘æ¡¶ä¸­æ·»åŠ ä»¤ç‰Œï¼Œç›´åˆ°æ¡¶æ»¡ä¸ºæ­¢ã€‚</li><li>å½“è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œå°è¯•ä»æ¡¶ä¸­è·å–ä¸€ä¸ªä»¤ç‰Œï¼Œå¦‚æœæˆåŠŸåˆ™å¤„ç†è¯¥è¯·æ±‚ï¼Œå¦åˆ™æ‹’ç»è¯·æ±‚æˆ–è€…å°†è¯·æ±‚æ”¾å…¥é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚</li></ul></li><li><p>ä¸è¶³ä¹‹å¤„ï¼š</p><ul><li>ä»¤ç‰Œæ¡¶ç®—æ³•éœ€è¦å®šæ—¶åœ°ç”Ÿæˆä»¤ç‰Œï¼Œè¿™å¯èƒ½ä¼šå¼•å…¥é¢å¤–çš„ç³»ç»Ÿå¼€é”€ã€‚</li><li>ä»¤ç‰Œè¿‡æœŸé—®é¢˜</li><li>ä»¤ç‰Œç”Ÿæˆé€Ÿç‡é¢„å…ˆè®¾å®š</li></ul></li><li><p>æ›´å¥½çš„æ–¹æ¡ˆï¼š</p><ul><li>æ¼æ¡¶ç®—æ³•ä¸ä»¤ç‰Œæ¡¶ç®—æ³•ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”¨äºæµé‡æ•´å½¢å’Œé™é€Ÿã€‚ä¸åŒçš„æ˜¯ï¼Œæ¼æ¡¶ç®—æ³•å¯¹æµå…¥çš„è¯·æ±‚å‡åŒ€æµå‡ºï¼Œä¸ç®¡è¯·æ±‚ä½•æ—¶åˆ°è¾¾ï¼Œéƒ½æŒ‰å›ºå®šé€Ÿç‡å¤„ç†ã€‚å®ƒå¯ä»¥ä¸¥æ ¼æ§åˆ¶æ•°æ®å‘é€é€Ÿç‡ï¼Œä¸”ä¸ä¼šå…è®¸çªå‘æµé‡ï¼Œé€‚ç”¨äºå¯¹è¾“å‡ºé€Ÿç‡æœ‰ç¨³å®šè¦æ±‚ä¸”ä¸å…è®¸çªåˆºçš„åœºæ™¯ã€‚</li></ul></li></ol><h2 id="_9-openfeigin" tabindex="-1"><a class="header-anchor" href="#_9-openfeigin" aria-hidden="true">#</a> 9 . openFeigin</h2><h3 id="_1-ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_1-ä½¿ç”¨" aria-hidden="true">#</a> 1. ä½¿ç”¨</h3><ul><li>ä¸»å¯åŠ¨ç±»å¢åŠ  @EnableFeiginClients</li><li>ä¸šåŠ¡é€»è¾‘æ¥å£ @FeignClient</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentFeignService</span>
<span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/get/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPaymentById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-è¶…æ—¶æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#_2-è¶…æ—¶æ—¶é—´" aria-hidden="true">#</a> 2. è¶…æ—¶æ—¶é—´</h3><ul><li>openFeiginé»˜è®¤çš„è¶…æ—¶æ—¶é—´æ˜¯1ç§’é’Ÿã€‚è¿™æ„å‘³ç€å¦‚æœè°ƒç”¨çš„æœåŠ¡åœ¨1ç§’å†…æ²¡æœ‰å“åº”ï¼ŒopenFeignå°†ä¼šæŠ›å‡ºè¶…æ—¶å¼‚å¸¸ï¼Œéœ€è¦ä¿®æ”¹é…ç½®</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">default</span><span class="token punctuation">:</span>
       <span class="token comment">## è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œè®¾ç½®äº†5ç§’</span>
        <span class="token key atrule">connectTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>
        <span class="token comment">## è¯»å–çš„è¶…æ—¶æ—¶é—´ï¼Œè®¾ç½®äº†10ç§’</span>
        <span class="token key atrule">readTimeout</span><span class="token punctuation">:</span> <span class="token number">10000</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-feignè°ƒç”¨çš„åº•å±‚åŸç†" tabindex="-1"><a class="header-anchor" href="#_3-feignè°ƒç”¨çš„åº•å±‚åŸç†" aria-hidden="true">#</a> 3. feignè°ƒç”¨çš„åº•å±‚åŸç†</h3><p>Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„HTTPå®¢æˆ·ç«¯ï¼Œå®ƒä½¿å¾—ç¼–å†™WebæœåŠ¡å®¢æˆ·ç«¯å˜å¾—éå¸¸å®¹æ˜“ã€‚åœ¨Spring Cloudä¸­ï¼ŒFeignè¢«ç”¨æ¥å®ç°æœåŠ¡é—´çš„è°ƒç”¨ï¼Œå³å¾®æœåŠ¡ä¹‹é—´çš„RPCï¼ˆRemote Procedure Callï¼‰é€šä¿¡ã€‚</p><p>Feignçš„åº•å±‚ä¸»è¦ä¾èµ–äº Ribbon å’Œ HTTP å®¢æˆ·ç«¯ï¼ˆå¦‚ Apache HttpClient æˆ– OkHttpï¼‰ã€‚å…¶å·¥ä½œåŸç†å¯ä»¥ç®€å•æè¿°ä¸ºï¼š</p><ol><li><strong>åŠ¨æ€ä»£ç†</strong>ï¼šFeigné€šè¿‡JDKæˆ–CGLIBåŠ¨æ€ä»£ç†æŠ€æœ¯åˆ›å»ºä¸€ä¸ªæ¥å£çš„å®ç°ç±»ï¼Œè¿™ä¸ªå®ç°ç±»ä¼šåŒ…è£…è¯·æ±‚æ–¹æ³•ï¼Œå½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ‰§è¡Œä¸€ä¸ªHTTPè¯·æ±‚ã€‚</li><li><strong>ç¼–ç /è§£ç </strong>ï¼šå¯¹äºæ–¹æ³•å‚æ•°ï¼ŒFeignä¼šé€šè¿‡Encoderè¿›è¡Œç¼–ç è½¬æ¢æˆé€‚åˆHTTPä¼ è¾“çš„æ ¼å¼ï¼ˆå¦‚JSONã€XMLç­‰ï¼‰ï¼Œç„¶åé€šè¿‡HTTPå®¢æˆ·ç«¯å‘é€è¯·æ±‚ã€‚æ¥æ”¶åˆ°å“åº”åï¼Œå†é€šè¿‡Decoderå°†HTTPå“åº”å†…å®¹è§£ç æˆJavaå¯¹è±¡è¿”å›ã€‚</li><li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šFeigné›†æˆäº†Ribbonï¼Œèƒ½å¤Ÿå®ç°å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œå³åœ¨è°ƒç”¨è¿œç¨‹æœåŠ¡æ—¶ï¼Œå¯ä»¥æ ¹æ®é…ç½®çš„è´Ÿè½½å‡è¡¡ç­–ç•¥é€‰æ‹©ç›®æ ‡æœåŠ¡å®ä¾‹ã€‚</li><li><strong>Hystrixæ”¯æŒ</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒFeigné›†æˆäº†Hystrixï¼ˆå¯é€‰é…ç½®ï¼‰ï¼Œå¯ä»¥å®ç°æœåŠ¡é™çº§ã€ç†”æ–­ä»¥åŠéš”ç¦»ç­‰åŠŸèƒ½ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®¹é”™æ€§ã€‚</li><li><strong>è¶…æ—¶ä¸é‡è¯•</strong>ï¼šé€šè¿‡Ribbonï¼ŒFeignå¯ä»¥è®¾ç½®è¯·æ±‚çš„è¶…æ—¶æ—¶é—´å’Œé‡è¯•æ¬¡æ•°ç­‰ç­–ç•¥ã€‚</li></ol><p>æ€»ç»“æ¥è¯´ï¼ŒFeignåˆ©ç”¨äº†Ribbonçš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å’Œå¤šç§HTTPå®¢æˆ·ç«¯åº“çš„èƒ½åŠ›ï¼Œç»“åˆè‡ªå·±å¼ºå¤§çš„APIå£°æ˜å¼å®šä¹‰å’Œå¤„ç†æœºåˆ¶ï¼Œä½¿å¾—æœåŠ¡é—´è°ƒç”¨å˜å¾—æ›´åŠ ç®€æ´ã€é«˜æ•ˆä¸”æ˜“äºç»´æŠ¤ã€‚</p><h3 id="_4-feign-ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_4-feign-ä¼˜åŒ–" aria-hidden="true">#</a> 4. feign ä¼˜åŒ–</h3><ul><li>è¶…æ—¶è®¾ç½®ä¼˜åŒ–</li><li>é»˜è®¤HttpClientä¿®æ”¹ä¸ºApache HttpClient</li><li>å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡ŒGZIPå‹ç¼©</li></ul><h2 id="_10-hystrix" tabindex="-1"><a class="header-anchor" href="#_10-hystrix" aria-hidden="true">#</a> 10 Hystrix</h2><h3 id="_1-æœåŠ¡é™çº§" tabindex="-1"><a class="header-anchor" href="#_1-æœåŠ¡é™çº§" aria-hidden="true">#</a> 1. æœåŠ¡é™çº§</h3><ul><li>å®šä¹‰ <ul><li>æœåŠ¡å™¨å¿™ï¼Œè¯·ç¨åå†è¯•ï¼Œä¸è®©å®¢æˆ·ç«¯ç­‰å¾…å¹¶ç«‹åˆ»è¿”å›ä¸€ä¸ªå‹å¥½æç¤ºï¼Œfallback</li></ul></li><li>å“ªäº›æƒ…å†µä¼šå‘ç”Ÿé™çº§ <ul><li>ç¨‹åºè¿è¡Œå¼‚å¸¸</li><li>è¶…æ—¶</li><li>æœåŠ¡ç†”æ–­è§¦å‘æœåŠ¡é™çº§</li><li>çº¿ç¨‹æ± /ä¿¡å·é‡æ‰“æ»¡ä¹Ÿä¼šå¯¼è‡´æœåŠ¡é™çº§</li><li><strong>é…ç½®çš„é™çº§ç­–ç•¥ç”Ÿæ•ˆ</strong>ï¼šåœ¨ä¸€äº›æ¡†æ¶ï¼ˆå¦‚Hystrixã€Sentinelï¼‰ä¸­ï¼Œå¯ä»¥æ ¹æ®é¢„å…ˆè®¾å®šçš„è§„åˆ™ï¼ˆå¦‚RTå“åº”æ—¶é—´ã€QPSè¯·æ±‚æ•°é‡ç­‰ï¼‰è‡ªåŠ¨è§¦å‘æœåŠ¡é™çº§</li></ul></li></ul><h3 id="_2-æœåŠ¡ç†”æ–­" tabindex="-1"><a class="header-anchor" href="#_2-æœåŠ¡ç†”æ–­" aria-hidden="true">#</a> 2. æœåŠ¡ç†”æ–­</h3><ul><li><p>å®šä¹‰</p><ul><li><p>ç±»ä¼¼ä¿é™©ä¸è¾¾åˆ°æœ€å¤§æœåŠ¡è®¿é—®åï¼Œç›´æ¥æ‹’ç»è®¿é—®ï¼Œæ‹‰é—¸é™ç”µï¼Œç„¶åè°ƒç”¨æœåŠ¡é™çº§çš„æ–¹æ³•å¹¶è¿”å›å‹å¥½æç¤º</p></li><li><p>æœåŠ¡çš„é™çº§--&gt;è¿›è€Œç†”æ–­--&gt;æ¢å¤è°ƒç”¨é“¾è·¯</p></li></ul></li></ul><h3 id="_3-æœåŠ¡é™æµ" tabindex="-1"><a class="header-anchor" href="#_3-æœåŠ¡é™æµ" aria-hidden="true">#</a> 3. æœåŠ¡é™æµ</h3><ul><li>å®šä¹‰ <ul><li>ç§’æ€é«˜å¹¶å‘ç­‰æ“ä½œï¼Œä¸¥ç¦ä¸€çªèœ‚çš„è¿‡æ¥æ‹¥æŒ¤ï¼Œå¤§å®¶æ’é˜Ÿï¼Œä¸€ç§’é’ŸNä¸ªï¼Œæœ‰åºè¿›è¡Œ</li></ul></li></ul><h3 id="_4-æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_4-æ³¨è§£" aria-hidden="true">#</a> 4. æ³¨è§£</h3><h4 id="_1-hystrixcommand" tabindex="-1"><a class="header-anchor" href="#_1-hystrixcommand" aria-hidden="true">#</a> 1. @HystrixCommand</h4><ul><li>æœåŠ¡é™çº§</li><li>éœ€è¦æœ‰ä¸€ä¸ªå…œåº•çš„æ–¹æ³•</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentInfo_TimeOutHandler&quot;</span><span class="token punctuation">,</span>commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;execution.isolation.thread.timeoutInMilliseconds&quot;</span><span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token string">&quot;3000&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_TimeOut</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-defaultproperties-defaultfallback" tabindex="-1"><a class="header-anchor" href="#_2-defaultproperties-defaultfallback" aria-hidden="true">#</a> 2. @DefaultProperties(defaultFallback = &quot;&quot;)</h4><ul><li>@HystrixCommand éœ€è¦åœ¨æ¯ä¸ªæ–¹æ³•é…ç½®ä¸€ä¸ªï¼Œå¤ªç¹ç</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@DefaultProperties</span><span class="token punctuation">(</span>defaultFallback <span class="token operator">=</span> <span class="token string">&quot;payment_Global_FallbackMethod&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentHystirxController</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-sentinel" tabindex="-1"><a class="header-anchor" href="#_11-sentinel" aria-hidden="true">#</a> 11. sentinel</h2><h3 id="_1-sentinelresource" tabindex="-1"><a class="header-anchor" href="#_1-sentinelresource" aria-hidden="true">#</a> 1. @SentinelResource</h3><ul><li><p>å¯ä»¥å¯¹èµ„æºè¿›è¡Œé™æµã€ç†”æ–­ã€é™çº§ç­‰æ“ä½œ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;resourceName&quot;</span><span class="token punctuation">,</span> blockHandler <span class="token operator">=</span> <span class="token string">&quot;handleBlock&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ–¹æ³•é€»è¾‘</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>@SentinelResource</code> æ³¨è§£æ ‡è¯†äº† <code>getResource</code> æ–¹æ³•ä¸º Sentinel çš„èµ„æºï¼Œå…¶ä¸­ <code>value</code> å±æ€§æŒ‡å®šäº†èµ„æºçš„åç§°ã€‚å¦å¤–ï¼Œé€šè¿‡ <code>blockHandler</code> å±æ€§æŒ‡å®šäº†å½“èµ„æºè¢«æµæ§æ—¶çš„å¤„ç†æ–¹æ³•ï¼Œå³ <code>handleBlock</code> æ–¹æ³•ã€‚è¿™æ ·å°±å¯ä»¥å®ç°å¯¹èµ„æºçš„é™æµæ“ä½œã€‚</p><p>é™¤äº† <code>blockHandler</code> å±æ€§å¤–ï¼Œ<code>@SentinelResource</code> æ³¨è§£è¿˜æ”¯æŒå…¶ä»–å±æ€§ï¼Œæ¯”å¦‚ <code>fallback</code>ã€<code>defaultFallback</code> ç­‰ï¼Œç”¨äºæŒ‡å®šèµ„æºè¢«é™çº§æˆ–ç†”æ–­æ—¶çš„å¤„ç†æ–¹æ³•</p></li></ul><h3 id="_2-é™æµè§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_2-é™æµè§„åˆ™" aria-hidden="true">#</a> 2. é™æµè§„åˆ™</h3><ul><li><p>æµæ§</p><ul><li>ç›´æ¥</li><li>å…³è”</li></ul><figure><img src="/assets/image-20240414164111402-62600cda.png" alt="image-20240414164111402" tabindex="0" loading="lazy"><figcaption>image-20240414164111402</figcaption></figure></li><li><p>ç†”æ–­</p><figure><img src="/assets/image-20240414164202806-229eea10.png" alt="image-20240414164202806" tabindex="0" loading="lazy"><figcaption>image-20240414164202806</figcaption></figure></li><li><p>çƒ­ç‚¹è§„åˆ™</p></li><li><p>æˆæƒè§„åˆ™</p></li></ul><h2 id="_12-seata" tabindex="-1"><a class="header-anchor" href="#_12-seata" aria-hidden="true">#</a> 12 . Seata</h2><h3 id="_1-ä½¿ç”¨-1" tabindex="-1"><a class="header-anchor" href="#_1-ä½¿ç”¨-1" aria-hidden="true">#</a> 1. ä½¿ç”¨</h3><ul><li>@GlobalTransactional</li></ul><h3 id="_2-ä¸‰å¤§ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-ä¸‰å¤§ç»„ä»¶" aria-hidden="true">#</a> 2. ä¸‰å¤§ç»„ä»¶</h3><ul><li><p>TC</p><ul><li>å…¨å±€äº‹åŠ¡åè°ƒå™¨ï¼Œè´Ÿè´£å…¨å±€äº‹åŠ¡çš„åè°ƒå’Œç®¡ç†</li><li>Transaction Coordinator</li></ul></li><li><p>TM</p><ul><li>äº‹åŠ¡ç®¡ç†å™¨ï¼Œè´Ÿè´£å…¨å±€äº‹åŠ¡çš„å‘èµ·ã€æäº¤å’Œå›æ»š</li><li>Transaction Manager</li></ul></li><li><p>RM</p><ul><li>èµ„æºç®¡ç†å™¨ï¼Œè´Ÿè´£ç®¡ç†åˆ†æ”¯äº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸ</li><li>Resource Manager</li></ul></li><li><p>æµç¨‹</p><ul><li>TM å¼€å¯åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆTM å‘ TC æ³¨å†Œå…¨å±€äº‹åŠ¡è®°å½•ï¼‰ï¼›</li><li>æŒ‰ä¸šåŠ¡åœºæ™¯ï¼Œç¼–æ’æ•°æ®åº“ã€æœåŠ¡ç­‰äº‹åŠ¡å†…èµ„æºï¼ˆRM å‘ TC æ±‡æŠ¥èµ„æºå‡†å¤‡çŠ¶æ€ ï¼‰ï¼›</li><li>TM ç»“æŸåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œäº‹åŠ¡ä¸€é˜¶æ®µç»“æŸï¼ˆTM é€šçŸ¥ TC æäº¤/å›æ»šåˆ†å¸ƒå¼äº‹åŠ¡ï¼‰ï¼›</li><li>TC æ±‡æ€»äº‹åŠ¡ä¿¡æ¯ï¼Œå†³å®šåˆ†å¸ƒå¼äº‹åŠ¡æ˜¯æäº¤è¿˜æ˜¯å›æ»šï¼›</li><li>TC é€šçŸ¥æ‰€æœ‰ RM æäº¤/å›æ»š èµ„æºï¼Œäº‹åŠ¡äºŒé˜¶æ®µç»“æŸã€‚</li></ul></li></ul><h3 id="_3-åº•å±‚åŸç†" tabindex="-1"><a class="header-anchor" href="#_3-åº•å±‚åŸç†" aria-hidden="true">#</a> 3. åº•å±‚åŸç†</h3><p>Seata æä¾›äº†å¤šç§åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å¼ï¼ŒåŒ…æ‹¬ ATï¼ˆAutomatic Transactionï¼‰ã€TCCï¼ˆTry-Confirm-Cancelï¼‰ã€Saga å’Œ XAã€‚ä»¥ä¸‹æ˜¯ Seata åœ¨ AT æ¨¡å¼ä¸‹è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„åŸºæœ¬åŸç†ï¼š</p><p>Seata AT æ¨¡å¼çš„åº•å±‚åŸç†ï¼š</p><ol><li><strong>å…¨å±€äº‹åŠ¡åè°ƒå™¨ï¼ˆTCï¼ŒTransaction Coordinatorï¼‰</strong>ï¼š <ul><li>TC ç»„ä»¶è´Ÿè´£ç»´æŠ¤å…¨å±€äº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬å¼€å¯äº‹åŠ¡ã€æäº¤äº‹åŠ¡æˆ–å›æ»šäº‹åŠ¡ï¼Œå¹¶è®°å½•å…¨å±€äº‹åŠ¡çŠ¶æ€ã€‚</li></ul></li><li><strong>åˆ†æ”¯äº‹åŠ¡åè°ƒå™¨ï¼ˆTM &amp; RMï¼ŒTransaction Manager &amp; Resource Managerï¼‰</strong>ï¼š <ul><li>TM æ˜¯å…¨å±€äº‹åŠ¡çš„å‘èµ·è€…ï¼Œé€šå¸¸åµŒå…¥åœ¨åº”ç”¨æœåŠ¡ä¸­ï¼Œè´Ÿè´£å¼€å¯å…¨å±€äº‹åŠ¡å¹¶å°†æœ¬åœ°äº‹åŠ¡è½¬æ¢ä¸ºå…¨å±€äº‹åŠ¡ã€‚</li><li>RM æ˜¯èµ„æºç®¡ç†å™¨ï¼Œæ¯ä¸ªæ•°æ®åº“ä½œä¸ºä¸€ä¸ªRMï¼ŒSeataæä¾›äº†RMä»£ç†ï¼Œå°†å…¶å¯¹æ¥åˆ°æ•°æ®åº“ï¼Œè´Ÿè´£å•æœºäº‹åŠ¡çš„æäº¤å’Œå›æ»šã€‚</li></ul></li><li><strong>äº‹åŠ¡ä¸Šä¸‹æ–‡å’Œundo/redoæ—¥å¿—</strong>ï¼š <ul><li>å¼€å¯å…¨å±€äº‹åŠ¡åï¼ŒSeata ä¼šåœ¨æ¯ä¸ªå‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ•°æ®åº“å®ä¾‹ä¸Šæ³¨å†Œåˆ†æ”¯äº‹åŠ¡ï¼Œå¹¶åœ¨æ‰§è¡ŒSQLå‰ä¿å­˜åŸå§‹æ•°æ®åˆ°Undo Logï¼ˆç”¨äºå›æ»šï¼‰å’Œåœ¨æ‰§è¡Œåä¿å­˜å·²æ›´æ–°çš„æ•°æ®åˆ°Redo Logï¼ˆç”¨äºé‡åšï¼‰ã€‚</li></ul></li><li><strong>äº‹åŠ¡æäº¤ä¸å›æ»š</strong>ï¼š <ul><li>å…¨å±€æäº¤æ—¶ï¼ŒTC é€šçŸ¥æ‰€æœ‰RMæäº¤åˆ†æ”¯äº‹åŠ¡ï¼ŒRMæ ¹æ®Redo Logæäº¤æ›´æ”¹ã€‚</li><li>è‹¥ä»»ä½•RMæäº¤å¤±è´¥ï¼Œåˆ™TCé€šçŸ¥æ‰€æœ‰RMå›æ»šï¼ŒRMæ ¹æ®Undo Logè¿˜åŸäº‹åŠ¡æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚</li></ul></li><li><strong>ä¸€è‡´æ€§ä¿éšœ</strong>ï¼š <ul><li>é€šè¿‡ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰çš„è¿‡ç¨‹ï¼Œç¡®ä¿æ‰€æœ‰åˆ†æ”¯äº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æäº¤ï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œä»¥æ­¤æ¥ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</li></ul></li></ol><p>æµç¨‹æ¦‚è§ˆï¼š</p><ol><li><strong>å¼€å¯å…¨å±€äº‹åŠ¡</strong>ï¼šTM å‘ TC å‘èµ·å…¨å±€äº‹åŠ¡çš„å¼€å¯è¯·æ±‚ï¼Œå¹¶è·å¾—å…¨å±€äº‹åŠ¡IDï¼ˆXIDï¼‰ã€‚</li><li><strong>åˆ†æ”¯äº‹åŠ¡æ³¨å†Œ</strong>ï¼šåœ¨æ¯ä¸ªæ•°æ®åº“æ“ä½œä¹‹å‰ï¼ŒTM å°†æœ¬åœ°äº‹åŠ¡ä¸å…¨å±€äº‹åŠ¡å…³è”ï¼Œå¹¶å°†æ“ä½œå‰çš„åŸå§‹æ•°æ®å­˜å…¥ Undo Logã€‚</li><li><strong>æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</strong>ï¼šåº”ç”¨æ­£å¸¸æ‰§è¡Œæœ¬åœ° SQLã€‚</li><li><strong>åˆ†æ”¯äº‹åŠ¡æŠ¥å‘Š</strong>ï¼šåœ¨æœ¬åœ°äº‹åŠ¡æäº¤å‰ï¼ŒTM æŠŠåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€æŠ¥å‘Šç»™ TCã€‚</li><li><strong>å…¨å±€æäº¤/å›æ»šå†³ç­–</strong>ï¼šTC æ ¹æ®æ‰€æœ‰åˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ä½œå‡ºå…¨å±€æäº¤æˆ–å›æ»šçš„å†³å®šï¼Œå¹¶é€šçŸ¥æ‰€æœ‰RMæ‰§è¡Œç›¸åº”çš„åŠ¨ä½œã€‚</li></ol><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒSeata ATæ¨¡å¼èƒ½å¤Ÿåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹æ¨¡æ‹Ÿå‡ºç±»ä¼¼äºä¼ ç»Ÿæ•°æ®åº“ACIDç‰¹æ€§çš„ä¸€è‡´æ€§äº‹åŠ¡è¡Œä¸ºã€‚</p><h2 id="_13-nacos" tabindex="-1"><a class="header-anchor" href="#_13-nacos" aria-hidden="true">#</a> 13 . nacos</h2><h3 id="_1-nacosçš„å¿ƒè·³æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_1-nacosçš„å¿ƒè·³æœºåˆ¶" aria-hidden="true">#</a> 1. nacosçš„å¿ƒè·³æœºåˆ¶ï¼Ÿ</h3><ol><li><p><strong>å®¢æˆ·ç«¯å¿ƒè·³</strong></p><ul><li>å¯¹äºä¸´æ—¶å®ä¾‹ï¼ˆç§Ÿçº¦æ¨¡å¼ï¼‰ï¼ŒNacos ä½¿ç”¨å®¢æˆ·ç«¯ä¸»åŠ¨ä¸ŠæŠ¥å¿ƒè·³çš„æ–¹å¼ã€‚æ¯ä¸ªæœåŠ¡å®ä¾‹åœ¨å…¶å¯åŠ¨åï¼Œé€šè¿‡é›†æˆçš„ Nacos å®¢æˆ·ç«¯ SDK å‘ Nacos Server å‘é€å¿ƒè·³ï¼Œé€šå¸¸æ˜¯å‘¨æœŸæ€§çš„ HTTP è¯·æ±‚æˆ–è€… TCP åè®®çš„æ•°æ®åŒ…ã€‚</li><li>å¿ƒè·³åŒ…é€šå¸¸åŒ…å«æœåŠ¡å®ä¾‹çš„åŸºæœ¬ä¿¡æ¯å’Œå½“å‰çŠ¶æ€ï¼Œæ¯”å¦‚æœåŠ¡IDã€IPåœ°å€ã€ç«¯å£ã€æƒé‡ç­‰ä¿¡æ¯ã€‚</li><li>å¦‚æœæœåŠ¡å®ä¾‹åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…æ²¡æœ‰å‘ Nacos Server æŠ¥å‘Šå¿ƒè·³ï¼Œåˆ™ä¼šè¢«æ ‡è®°ä¸ºä¸å¥åº·æˆ–ä¸‹çº¿ï¼Œä¸å†å¯¹å¤–æä¾›æœåŠ¡å‘ç°ï¼Œä»è€Œé˜²æ­¢å®¢æˆ·ç«¯è°ƒç”¨å·²å¤±æ•ˆçš„æœåŠ¡å®ä¾‹ã€‚</li></ul></li><li><p><strong>æœåŠ¡ç«¯æ¢æµ‹</strong></p><ul><li>å¯¹äºæŒä¹…å®ä¾‹ï¼ˆéç§Ÿçº¦æ¨¡å¼ï¼‰ï¼ŒNacos é‡‡ç”¨æœåŠ¡ç«¯ä¸»åŠ¨æ¢æµ‹çš„æ–¹å¼æ¥è¿›è¡Œå¥åº·æ£€æŸ¥ã€‚æœåŠ¡ç«¯ä¼šæŒ‰ç…§é¢„è®¾çš„æ—¶é—´é—´éš”å‘æœåŠ¡å®ä¾‹å‘èµ·æ¢æµ‹è¯·æ±‚ï¼Œä¾‹å¦‚å‘é€ HTTP GET æˆ–è€… TCP PING è¯·æ±‚ã€‚</li><li>å¦‚æœæœåŠ¡å®ä¾‹èƒ½æ­£ç¡®å“åº”æ¢æµ‹è¯·æ±‚ï¼Œé‚£ä¹ˆè®¤ä¸ºè¯¥å®ä¾‹æ˜¯å¥åº·çš„ï¼›å¦‚æœè¿ç»­å¤šæ¬¡æ¢æµ‹å¤±è´¥ï¼Œåˆ™æœåŠ¡ç«¯ä¼šè®¤ä¸ºè¯¥å®ä¾‹ä¸å¥åº·ï¼Œå¹¶ä»æœåŠ¡åˆ—è¡¨ä¸­å‰”é™¤ã€‚</li></ul><p>nacosçš„å¿ƒè·³é»˜è®¤æ˜¯5ç§’ï¼Œå³æœåŠ¡å®ä¾‹é»˜è®¤æ¯éš”5ç§’å‘nacosæœåŠ¡å™¨å‘é€ä¸€æ¬¡å¿ƒè·³ã€‚é»˜è®¤è¶…æ—¶æ—¶é—´å¯èƒ½æ˜¯15ç§’æˆ–è€…30ç§’ï¼Œé‚£ä¹ˆå¦‚ä½•é€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹å‘¢</p></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code># <span class="token class-name">Spring</span> <span class="token class-name">Boot</span> åº”ç”¨ä¸­çš„ application<span class="token punctuation">.</span>yml æˆ– application<span class="token punctuation">.</span>properties æ–‡ä»¶
spring<span class="token operator">:</span>
  cloud<span class="token operator">:</span>
    nacos<span class="token operator">:</span>
      discovery<span class="token operator">:</span>
        # è®¾ç½®æœåŠ¡å®ä¾‹å¿ƒè·³é—´éš”
        heartbeat<span class="token operator">:</span>
          interval<span class="token operator">:</span> <span class="token number">5000</span> # å•ä½ï¼šæ¯«ç§’ï¼Œè¿™é‡Œè®¾ç½®ä¸º<span class="token number">5</span>ç§’ï¼Œå¯æ ¹æ®å®é™…éœ€è¦è°ƒæ•´
          timeout<span class="token operator">:</span> <span class="token number">15000</span> # å•ä½ï¼šæ¯«ç§’ï¼Œè¿™æ˜¯å¿ƒè·³è¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´æœªæ”¶åˆ°å¿ƒè·³ï¼ŒæœåŠ¡å°†è¢«è§†ä¸ºä¸å¥åº·

        # æ ¹æ®æŸäº›ç‰ˆæœ¬æˆ–ç‰¹å®šåœºæ™¯çš„é…ç½®é¡¹ï¼Œå¯èƒ½ä¼šä½¿ç”¨å¦‚ä¸‹å½¢å¼ï¼š
        # metadata<span class="token operator">:</span>
        #   preserved<span class="token punctuation">.</span>heart<span class="token punctuation">.</span>beat<span class="token punctuation">.</span>interval<span class="token operator">:</span> <span class="token number">5000</span> # ç”¨äºè®¾ç½®å¿ƒè·³é—´éš”
        #   preserved<span class="token punctuation">.</span>heart<span class="token punctuation">.</span>beat<span class="token punctuation">.</span>timeout<span class="token operator">:</span> <span class="token number">15000</span> # è®¾ç½®å¿ƒè·³è¶…æ—¶æ—¶é—´

        # <span class="token class-name">Nacos</span> æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€
        server<span class="token operator">-</span>addr<span class="token operator">:</span> localhost<span class="token operator">:</span><span class="token number">8848</span>

æ³¨æ„ï¼šä¸Šè¿°é…ç½®çš„å…·ä½“é”®å€¼å¯èƒ½ä¼šéšç€ <span class="token class-name">Nacos</span> å’Œ <span class="token class-name">Spring</span> <span class="token class-name">Cloud</span> <span class="token class-name">Alibaba</span> ç‰ˆæœ¬çš„å˜åŒ–è€Œå˜åŒ–ï¼Œè¯·æ ¹æ®æ‰€ä½¿ç”¨çš„ <span class="token class-name">Nacos</span> å®¢æˆ·ç«¯ç‰ˆæœ¬æ–‡æ¡£è¿›è¡Œå‡†ç¡®é…ç½®ã€‚

å¦‚æœä½ ä¸æ˜¯ä½¿ç”¨ <span class="token class-name">Spring</span> <span class="token class-name">Cloud</span> é›†æˆè€Œæ˜¯ç›´æ¥ä½¿ç”¨ <span class="token class-name">Nacos</span> å®¢æˆ·ç«¯ <span class="token constant">SDK</span>ï¼Œåˆ™éœ€è¦å‚è€ƒå¯¹åº”çš„ <span class="token constant">SDK</span> æ–‡æ¡£æ¥é…ç½®å¿ƒè·³é—´éš”ç­‰å‚æ•°ï¼Œé€šå¸¸æ˜¯åœ¨åˆå§‹åŒ–å®¢æˆ·ç«¯æ—¶é€šè¿‡ <span class="token constant">API</span> è¿›è¡Œè®¾ç½®ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-nacosæœåŠ¡æ³¨å†Œå‘ç°çš„åŸç†" tabindex="-1"><a class="header-anchor" href="#_2-nacosæœåŠ¡æ³¨å†Œå‘ç°çš„åŸç†" aria-hidden="true">#</a> 2. nacosæœåŠ¡æ³¨å†Œå‘ç°çš„åŸç†</h3><p>Nacos ä½œä¸ºé˜¿é‡Œå·´å·´å¼€æºçš„ä¸€æ¬¾é›†æˆäº†æœåŠ¡æ³¨å†Œä¸å‘ç°ã€é…ç½®ç®¡ç†ã€åŠ¨æ€DNSæœåŠ¡äºä¸€ä½“çš„ä¸­é—´ä»¶ï¼Œå…¶åº•å±‚å®ç°æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„è¿‡ç¨‹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤å’ŒæŠ€æœ¯è¦ç‚¹ï¼š</p><ol><li><p><strong>æœåŠ¡æ³¨å†Œ</strong>ï¼š</p><ul><li>å½“æœåŠ¡å®ä¾‹å¯åŠ¨æ—¶ï¼Œé€šè¿‡é›†æˆNacos SDKï¼ŒæœåŠ¡å®ä¾‹ä¼šå‘Nacos Serverå‘èµ·æ³¨å†Œè¯·æ±‚ï¼Œæäº¤è‡ªèº«çš„æœåŠ¡IDã€IPåœ°å€ã€ç«¯å£ã€å…ƒæ•°æ®ç­‰ä¿¡æ¯ã€‚</li><li>Nacos Serveræ¥æ”¶è¿™äº›ä¿¡æ¯å¹¶å­˜å‚¨åœ¨å†…éƒ¨çš„æ•°æ®ç»“æ„ä¸­ï¼Œé€šå¸¸æ˜¯åŸºäºå†…å­˜çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨æ–¹æ¡ˆï¼Œä»¥ä¿è¯æœåŠ¡æ³¨å†Œå’ŒæŸ¥è¯¢çš„é«˜æ•ˆç‡ã€‚</li><li>Nacos Serverè¿˜æ”¯æŒæŒä¹…åŒ–åˆ°ç£ç›˜æˆ–æ•°æ®åº“ï¼ˆå¦‚MySQLï¼‰ï¼Œä»¥ä¾¿åœ¨æœåŠ¡å™¨é‡å¯æˆ–é›†ç¾¤ç¯å¢ƒä¸‹ä¿æŒæœåŠ¡å®ä¾‹åˆ—è¡¨çš„ä¸€è‡´æ€§ã€‚</li></ul></li><li><p><strong>æœåŠ¡å¿ƒè·³</strong>ï¼š</p><ul><li>æ³¨å†ŒæˆåŠŸåï¼ŒæœåŠ¡å®ä¾‹ä¼šç»´æŒä¸€ä¸ªå¿ƒè·³æœºåˆ¶ï¼Œå®šæœŸå‘Nacos Serverå‘é€å¿ƒè·³ï¼Œè¡¨æ˜è‡ªå·±çš„å­˜æ´»çŠ¶æ€ã€‚</li><li>è‹¥Nacos Serveråœ¨æŒ‡å®šæ—¶é—´å†…æœªæ”¶åˆ°æœåŠ¡å®ä¾‹çš„å¿ƒè·³ï¼Œåˆ™è®¤ä¸ºè¯¥å®ä¾‹å·²ä¸‹çº¿ï¼Œå¹¶ä»æœåŠ¡åˆ—è¡¨ä¸­ç§»é™¤ã€‚</li></ul></li><li><p><strong>æœåŠ¡å‘ç°</strong>ï¼š</p><ul><li>å½“å®¢æˆ·ç«¯ï¼ˆæ¶ˆè´¹è€…ï¼‰éœ€è¦è°ƒç”¨æœåŠ¡æ—¶ï¼Œå®ƒä¼šé€šè¿‡Nacos SDKå‘Nacos Serverå‘èµ·æœåŠ¡å‘ç°è¯·æ±‚ï¼Œè¯·æ±‚æŒ‡å®šæœåŠ¡åä¸‹çš„å¯ç”¨æœåŠ¡å®ä¾‹åˆ—è¡¨ã€‚</li><li>Nacos Serveræ ¹æ®æœåŠ¡åæŸ¥æ‰¾å¯¹åº”çš„æœåŠ¡å®ä¾‹é›†åˆï¼Œç­›é€‰å‡ºå¥åº·åœ¨çº¿çš„æœåŠ¡å®ä¾‹ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li>å¦‚æœé…ç½®äº†å¥åº·æ£€æŸ¥å’Œè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ŒNacosè¿˜ä¼šæ ¹æ®ç­–ç•¥è¿›ä¸€æ­¥è¿‡æ»¤å’Œæ’åºæœåŠ¡å®ä¾‹åˆ—è¡¨ã€‚</li></ul></li><li><p><strong>å¥åº·æ£€æŸ¥</strong>ï¼š</p><ul><li>Nacosæ”¯æŒä¸»åŠ¨å¥åº·æ£€æŸ¥ï¼Œé€šè¿‡å¥åº·æ£€æŸ¥æ’ä»¶å¯ä»¥æ£€æµ‹æœåŠ¡å®ä¾‹çš„å®é™…å¥åº·çŠ¶å†µï¼Œä¾‹å¦‚é€šè¿‡TCPã€HTTPç­‰æ–¹å¼éªŒè¯æœåŠ¡æ˜¯å¦å¯ç”¨ã€‚</li></ul></li><li><p><strong>æ•°æ®åŒæ­¥</strong>ï¼š</p><ul><li>åœ¨é›†ç¾¤éƒ¨ç½²æ¨¡å¼ä¸‹ï¼ŒNacos Serverä¹‹é—´çš„æ•°æ®åŒæ­¥é‡‡ç”¨Raftä¸€è‡´æ€§ç®—æ³•ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œä»è€Œç¡®ä¿å„ä¸ªèŠ‚ç‚¹ä¸Šçš„æœåŠ¡æ³¨å†Œä¿¡æ¯å’ŒæœåŠ¡å‘ç°ç»“æœæ˜¯ä¸€è‡´çš„ã€‚</li></ul></li><li><p><strong>DNSæœåŠ¡</strong>ï¼š</p><ul><li>å¦å¤–ï¼ŒNacosè¿˜æä¾›äº†DNSæœåŠ¡å‘ç°æ¨¡å¼ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥é€šè¿‡DNSåè®®è·å–æœåŠ¡å®ä¾‹çš„IPåœ°å€å’Œç«¯å£ï¼Œæ— éœ€ç›´æ¥è°ƒç”¨Nacos APIï¼Œç®€åŒ–äº†æœåŠ¡å‘ç°è¿‡ç¨‹ã€‚</li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼ŒNacosé€šè¿‡ä¸€å¥—é«˜æ•ˆå¯é çš„æ¶ˆæ¯é€šä¿¡æœºåˆ¶ã€æ•°æ®å­˜å‚¨ä¸åŒæ­¥ç­–ç•¥ä»¥åŠæœåŠ¡å¥åº·ç›‘æµ‹æœºåˆ¶ï¼Œå®ç°äº†å¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p><h3 id="_3-nacosåŠ¨æ€åˆ·æ–°åº•å±‚å®ç°" tabindex="-1"><a class="header-anchor" href="#_3-nacosåŠ¨æ€åˆ·æ–°åº•å±‚å®ç°" aria-hidden="true">#</a> 3. nacosåŠ¨æ€åˆ·æ–°åº•å±‚å®ç°</h3><p><code>@RefreshScope</code> æ˜¯ Spring Cloud ä½“ç³»ä¸­ç”¨æ¥å®ç°å®æ—¶åˆ·æ–°é…ç½®çš„ä¸€ç§æ³¨è§£ï¼Œç‰¹åˆ«åœ¨ç»“åˆ Nacos ä½œä¸ºé…ç½®ä¸­å¿ƒæ—¶ï¼Œèƒ½å¤Ÿä½¿å¾—åº”ç”¨åœ¨æ— éœ€é‡å¯çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€æ›´æ–°ä» Nacos ä¸­è·å–çš„é…ç½®ã€‚</p><p><strong>@RefreshScope å·¥ä½œåŸç†æ¦‚è§ˆï¼š</strong></p><ol><li><p><strong>æ³¨å…¥ Bean æ—¶çš„ä»£ç†æœºåˆ¶ï¼š</strong></p><ul><li>å½“ä¸€ä¸ªç±»æˆ–è€…æ–¹æ³•è¢«æ ‡è®°ä¸º <code>@RefreshScope</code> æ³¨è§£æ—¶ï¼ŒSpring å®¹å™¨ä¸ä¼šç›´æ¥å®ä¾‹åŒ–è¯¥ Beanï¼Œè€Œæ˜¯é€šè¿‡ CGLIB æˆ– JDK åŠ¨æ€ä»£ç†åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚</li><li>å½“å…¶ä»–ç»„ä»¶ä¾èµ–è¿™ä¸ª Bean æ—¶ï¼Œå®é™…ä¸Šæ˜¯ä¾èµ–äºè¿™ä¸ªä»£ç†å¯¹è±¡ã€‚</li></ul></li><li><p><strong>ç›‘å¬é…ç½®å˜åŒ–ï¼š</strong></p><ul><li>Nacos å®¢æˆ·ç«¯ï¼ˆå¦‚ <code>NacosConfigService</code>ï¼‰ä¼šå‘¨æœŸæ€§åœ°æˆ–é€šè¿‡é•¿è½®è¯¢æ–¹å¼ä» Nacos æœåŠ¡å™¨æ‹‰å–é…ç½®ä¿¡æ¯ï¼Œæ£€æµ‹æ˜¯å¦æœ‰å˜æ›´ã€‚</li><li>å½“é…ç½®å‘ç”Ÿå˜æ›´æ—¶ï¼ŒNacos å®¢æˆ·ç«¯ä¼šæ¥æ”¶åˆ°é€šçŸ¥ã€‚</li></ul></li><li><p><strong>è§¦å‘åˆ·æ–°ï¼š</strong></p><ul><li>é…ç½®å˜åŒ–åï¼ŒNacos å®¢æˆ·ç«¯ä¼šé€šè¿‡æŸç§æœºåˆ¶ï¼ˆä¾‹å¦‚å‘å¸ƒä¸€ä¸ª <code>RefreshEvent</code> äº‹ä»¶åˆ° Spring Cloud çš„äº‹ä»¶å¹¿æ’­ç³»ç»Ÿï¼‰é€šçŸ¥åˆ°æ‰€æœ‰å¸¦æœ‰ <code>@RefreshScope</code> çš„ Beanã€‚</li><li>åœ¨ Spring Cloud ç”Ÿæ€ä¸­ï¼Œæœ‰ä¸€ä¸ª <code>RefreshScope</code> ç±»ï¼Œå®ƒå®ç°äº† ApplicationListener æ¥å£ï¼Œå› æ­¤å®ƒå¯ä»¥ç›‘å¬åˆ° <code>RefreshScopeRefreshedEvent</code> æˆ– <code>RefreshEvent</code>ï¼Œå¹¶åœ¨æ¥æ”¶åˆ°è¿™äº›äº‹ä»¶æ—¶ï¼Œé‡æ–°åŠ è½½å¹¶åˆ·æ–°ä»£ç†å¯¹è±¡ä¸­çš„é…ç½®å±æ€§å€¼ã€‚</li></ul></li><li><p><strong>å±æ€§æ³¨å…¥æ›´æ–°ï¼š</strong></p><ul><li>å¯¹äºé‚£äº›é€šè¿‡ <code>@Value</code> æ³¨è§£ä»é…ç½®ä¸­å¿ƒè¯»å–çš„å±æ€§ï¼Œä¸€æ—¦é…ç½®åˆ·æ–°ï¼Œç›¸åº”çš„ Bean å±æ€§å€¼ä¹Ÿä¼šéšä¹‹æ›´æ–°ã€‚</li></ul></li><li><p><strong>ä¸»åŠ¨åˆ·æ–°æ¥å£ï¼š</strong></p><ul><li>é™¤äº†è¢«åŠ¨ç›‘å¬é…ç½®å˜åŒ–å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¿é—® <code>/refresh</code> ç«¯ç‚¹ä¸»åŠ¨è§¦å‘æ•´ä¸ªåº”ç”¨ç¨‹åºèŒƒå›´å†…çš„é…ç½®åˆ·æ–°ã€‚</li></ul></li></ol><p>æ€»ç»“æ¥è¯´ï¼Œ<code>@RefreshScope</code> çš„ä½œç”¨æ˜¯é…åˆé…ç½®ä¸­å¿ƒï¼ˆå¦‚ Nacosï¼‰å®ç°é…ç½®çš„çƒ­æ›´æ–°ï¼Œç¡®ä¿åº”ç”¨åœ¨è¿è¡Œæ—¶èƒ½å“åº”å¤–éƒ¨é…ç½®çš„å˜åŒ–ï¼Œä»è€Œå¢å¼ºäº†å¾®æœåŠ¡æ¶æ„ä¸‹çš„çµæ´»æ€§å’Œå¯è¿ç»´æ€§ã€‚</p><h2 id="_14-xxl-job" tabindex="-1"><a class="header-anchor" href="#_14-xxl-job" aria-hidden="true">#</a> 14. xxl-job</h2><h3 id="_1-xxl-job-å’Œelastic-jobçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_1-xxl-job-å’Œelastic-jobçš„åŒºåˆ«" aria-hidden="true">#</a> 1.xxl-job å’Œelastic-jobçš„åŒºåˆ«</h3><p>xxl-job å’Œ elastic-job éƒ½æ˜¯ç”¨äºè§£å†³åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„å®šæ—¶ä»»åŠ¡è°ƒåº¦é—®é¢˜ï¼Œä½†å®ƒä»¬çš„è®¾è®¡ç†å¿µå’Œé€‚ç”¨åœºæ™¯æœ‰æ‰€ä¸åŒï¼š</p><p><strong>xxl-job</strong>ï¼š</p><ul><li>å‡ºè‡ªå¤§ä¼—ç‚¹è¯„ï¼Œåæ¥ç”±é˜¿é‡Œäº‘ç»§ç»­ç»´æŠ¤å’Œå¼€å‘ã€‚</li><li>å®ƒæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œé‡‡ç”¨ä¸­å¿ƒåŒ–çš„è®¾è®¡ï¼Œè°ƒåº¦ä¸­å¿ƒé€šè¿‡æ•°æ®åº“é”æ¥ä¿è¯é›†ç¾¤åˆ†å¸ƒå¼è°ƒåº¦çš„ä¸€è‡´æ€§ã€‚</li><li>æ˜“äºç®¡ç†å’Œç›‘æ§ï¼Œæä¾›å‹å¥½çš„Webç•Œé¢ï¼Œæ”¯æŒä»»åŠ¡å¤±è´¥åçš„æŠ¥è­¦åŠŸèƒ½ã€‚</li><li>ä¾èµ–MySQLæ•°æ®åº“ä½œä¸ºæŒä¹…åŒ–å­˜å‚¨ï¼Œä¸ä¾èµ–Zookeeperç­‰åˆ†å¸ƒå¼åè°ƒæœåŠ¡ã€‚</li><li>ä¼˜åŠ¿åœ¨äºå…¶ç®€æ´æ˜“ç”¨ï¼Œå¯¹äºä¸­å°è§„æ¨¡çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦åœºæ™¯éå¸¸é€‚åˆã€‚</li></ul><p><strong>elastic-job</strong>ï¼š</p><ul><li>åŸå…ˆæ˜¯ç”±å½“å½“ç½‘å¼€å‘ï¼Œç°åœ¨å±äºApache ShardingSphereç”Ÿæ€çš„ä¸€éƒ¨åˆ†ã€‚</li><li>åˆ†ä¸ºElastic-Job-Liteå’ŒElastic-Job-Cloudä¸¤ç§æ¨¡å¼ï¼Œåˆ†åˆ«å¯¹åº”è½»é‡çº§å’Œäº‘åŸç”Ÿçš„è§£å†³æ–¹æ¡ˆã€‚</li><li>Elastic-Job-Liteæ˜¯å»ä¸­å¿ƒåŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œæ— éœ€ä¸­å¿ƒèŠ‚ç‚¹ï¼ŒåŸºäºZookeeperå®ç°åˆ†å¸ƒå¼åè°ƒã€‚</li><li>å¼ºè°ƒå¼¹æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ”¯æŒä»»åŠ¡åˆ†ç‰‡å’Œä½œä¸šå¤±è´¥çš„è½¬ç§»æ‰§è¡Œï¼Œæä¾›ä¸°å¯Œçš„å®¹é”™ç­–ç•¥ã€‚</li><li>å¯¹äºå¤§è§„æ¨¡åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ï¼Œå°¤å…¶æ˜¯éœ€è¦é«˜æ€§èƒ½å’Œé«˜åº¦å¼¹æ€§çš„åœºæ™¯ï¼ŒElastic-Jobçš„åŠŸèƒ½æ›´åŠ å…¨é¢å’Œå¼ºå¤§ã€‚</li></ul><p>é€‰æ‹©å“ªä¸€ä¸ªæ›´å¥½ä¸»è¦å–å†³äºæ‚¨çš„å®é™…éœ€æ±‚ï¼š</p><ul><li>å¦‚æœä½ çš„ä»»åŠ¡è°ƒåº¦éœ€æ±‚æ¯”è¾ƒç®€å•ï¼Œéƒ¨ç½²è§„æ¨¡è¾ƒå°ï¼Œå¯¹è¿ç»´ç•Œé¢å‹å¥½åº¦å’Œæ˜“äºå…¥é—¨æœ‰è¾ƒé«˜è¦æ±‚ï¼Œé‚£ä¹ˆxxl-jobå¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</li><li>å¦‚æœä½ éœ€è¦å¤„ç†å¤§é‡åˆ†å¸ƒå¼ä»»åŠ¡ï¼Œå¼ºè°ƒä»»åŠ¡çš„å¼¹æ€§åˆ†é…ã€é«˜å¯ç”¨æ€§å’Œå¼ºå¤§çš„å®¹é”™æœºåˆ¶ï¼Œä¸”æ„¿æ„æ¥å—æ›´é«˜çš„å­¦ä¹ æˆæœ¬ï¼Œé‚£ä¹ˆElastic-Jobå¯èƒ½æ›´é€‚åˆã€‚</li></ul><p>æ€»çš„æ¥è¯´ï¼Œä¸¤è€…éƒ½æ˜¯ä¼˜ç§€çš„äº§å“ï¼Œå…³é”®åœ¨äºè¯„ä¼°è‡ªèº«é¡¹ç›®çš„æŠ€æœ¯æ ˆã€ä»»åŠ¡è§„æ¨¡ã€æ‰©å±•æ€§éœ€æ±‚ä»¥åŠå›¢é˜Ÿå¯¹ç›¸å…³æŠ€æœ¯çš„ç†Ÿæ‚‰ç¨‹åº¦ç­‰å› ç´ ï¼Œä»è€Œåšå‡ºåˆé€‚çš„é€‰æ‹©ã€‚</p><h3 id="_2-xxl-jobæ˜¯å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼ä¸‹åªæœ‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„-åŸç†æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_2-xxl-jobæ˜¯å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼ä¸‹åªæœ‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„-åŸç†æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 2. xxl-jobæ˜¯å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼ä¸‹åªæœ‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„ï¼ŒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>XXL-JOB ä¸ºäº†ä¿è¯åˆ†å¸ƒå¼ç¯å¢ƒä¸‹åŒä¸€ä¸ªä»»åŠ¡åªæœ‰ä¸€ä¸ªæ‰§è¡Œå™¨æ‰§è¡Œï¼Œé‡‡ç”¨äº†ä¸­å¿ƒåŒ–è°ƒåº¦å’Œåˆ†å¸ƒå¼é”æœºåˆ¶æ¥é˜²æ­¢ä»»åŠ¡é‡å¤æ‰§è¡Œã€‚å…·ä½“åŸç†å¦‚ä¸‹ï¼š</p><ol><li><p><strong>ä¸­å¿ƒåŒ–è°ƒåº¦</strong>ï¼š</p><ul><li>XXL-JOB è®¾è®¡äº†ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒï¼ˆxxl-job-adminï¼‰ï¼Œæ‰€æœ‰çš„ä»»åŠ¡è°ƒåº¦æŒ‡ä»¤éƒ½ç”±è°ƒåº¦ä¸­å¿ƒç»Ÿä¸€å‘å‡ºã€‚</li><li>æ‰€æœ‰æ‰§è¡Œå™¨ï¼ˆxxl-job-executorï¼‰ä¼šå‘è°ƒåº¦ä¸­å¿ƒæ³¨å†Œè‡ªå·±åŠå…¶æ‰€èƒ½æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ã€‚</li><li>å½“è°ƒåº¦ä¸­å¿ƒæ ¹æ®CRONè¡¨è¾¾å¼è®¡ç®—å‡ºæŸä¸ªä»»åŠ¡åº”è¯¥è¢«æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šé€‰æ‹©ä¸€ä¸ªæ‰§è¡Œå™¨ï¼ˆé€šå¸¸æ˜¯è½®è¯¢æˆ–åŸºäºæƒé‡é€‰æ‹©ï¼‰æ¥æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</li></ul></li><li><p><strong>åˆ†å¸ƒå¼é”</strong>ï¼š</p><ul><li>è°ƒåº¦ä¸­å¿ƒåœ¨æ•°æ®åº“ä¸­å­˜å‚¨ä»»åŠ¡è°ƒåº¦çš„ç›¸å…³ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€ã€ä¸‹æ¬¡æ‰§è¡Œæ—¶é—´ç­‰ã€‚</li><li>åœ¨ç¡®å®šæ‰§è¡Œä»»åŠ¡çš„æ‰§è¡Œå™¨æ—¶ï¼Œè°ƒåº¦ä¸­å¿ƒä¼šä½¿ç”¨æ•°æ®åº“é”ï¼ˆå¦‚æ‚²è§‚é”æˆ–è€…ä¹è§‚é”ï¼‰æ¥ç¡®ä¿åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªæ‰§è¡Œå™¨è·å¾—æ‰§è¡Œä»»åŠ¡çš„æƒåˆ©ã€‚</li><li>å½“ä¸€ä¸ªæ‰§è¡Œå™¨é¢†å–åˆ°ä»»åŠ¡å‡†å¤‡æ‰§è¡Œæ—¶ï¼Œä¼šåœ¨æ•°æ®åº“ä¸­æ ‡è®°ä»»åŠ¡ä¸ºé”å®šçŠ¶æ€ï¼Œå…¶ä»–æ‰§è¡Œå™¨æ­¤æ—¶å°è¯•é¢†å–åŒä¸€ä»»åŠ¡æ—¶å°±ä¼šå‘ç°ä»»åŠ¡å·²è¢«é”å®šï¼Œä»è€Œé¿å…äº†é‡å¤æ‰§è¡Œã€‚</li></ul></li><li><p><strong>ä»»åŠ¡å”¯ä¸€æ ‡è¯†ä¸æ‰§è¡Œè®°å½•</strong>ï¼š</p><ul><li>æ¯ä¸ªä»»åŠ¡éƒ½æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œæ‰§è¡Œå™¨åœ¨æ‰§è¡Œä»»åŠ¡å‰ä¼šæ£€æŸ¥ä»»åŠ¡æ˜¯å¦å·²ç»è¢«æ‰§è¡Œæˆ–æ­£åœ¨æ‰§è¡Œï¼Œè¿™æ˜¯é€šè¿‡æŸ¥è¯¢æ•°æ®åº“ä¸­ä»»åŠ¡è°ƒåº¦è®°å½•è¡¨å®ç°çš„ã€‚</li><li>å¦‚æœå‘ç°ä»»åŠ¡æ­£åœ¨æ‰§è¡Œæˆ–å·²å®Œæˆï¼Œåˆ™ä¸ä¼šå†æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</li></ul></li><li><p><strong>æ•°æ®åº“åŸå­æ“ä½œ</strong>ï¼š</p><ul><li>åœ¨ä»»åŠ¡è°ƒåº¦è¿‡ç¨‹ä¸­ï¼Œè°ƒåº¦ä¸­å¿ƒé€šè¿‡æ•°æ®åº“äº‹åŠ¡æ¥ä¿è¯ä»»åŠ¡åˆ†é…å’Œæ‰§è¡ŒçŠ¶æ€æ›´æ–°çš„åŸå­æ€§ï¼Œç¡®ä¿æ— è®ºä½•æ—¶åªæœ‰ä¸€ä¸ªæ‰§è¡Œå™¨æˆåŠŸé¢†åˆ°ä»»åŠ¡å¹¶æ‰§è¡Œã€‚</li></ul></li></ol><p>æ€»ç»“æ¥è¯´ï¼ŒXXL-JOBé€šè¿‡ä¸­å¿ƒåŒ–çš„è°ƒåº¦ç­–ç•¥ç»“åˆæ•°æ®åº“çš„åŸå­æ“ä½œå’Œåˆ†å¸ƒå¼é”æœºåˆ¶ï¼Œæœ‰æ•ˆé˜²æ­¢äº†åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä»»åŠ¡çš„å¹¶å‘æ‰§è¡Œé—®é¢˜ï¼Œç¡®ä¿äº†ä»»åŠ¡çš„å¹‚ç­‰æ€§ã€‚</p><h2 id="_15-skywalking-åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„" tabindex="-1"><a class="header-anchor" href="#_15-skywalking-åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„" aria-hidden="true">#</a> 15. skywalking åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„</h2><h3 id="_1-skywalking-åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„" tabindex="-1"><a class="header-anchor" href="#_1-skywalking-åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„" aria-hidden="true">#</a> 1. skywalking åº•å±‚æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„</h3><p>Apache SkyWalking æ˜¯ä¸€ä¸ªå¼€æºçš„å¯è§‚æµ‹æ€§å¹³å°ï¼Œç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„é“¾è·¯è¿½è¸ªã€æ€§èƒ½ç›‘æ§å’Œè¯Šæ–­ã€‚å…¶åº•å±‚å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„æ ¸å¿ƒåŸç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li><p><strong>æ¢é’ˆ(Agent)</strong>ï¼š</p><ul><li>SkyWalking ä½¿ç”¨æ¢é’ˆï¼ˆAgentï¼‰æ¤å…¥åˆ°å„ä¸ªæœåŠ¡çš„è¿›ç¨‹ä¸­ï¼Œè¿™äº›æ¢é’ˆé€šå¸¸æ˜¯ä»¥Javaagentçš„å½¢å¼å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥æ˜¯è¯­è¨€ç‰¹å®šçš„SDKã€‚æ¢é’ˆçš„ä¸»è¦ä½œç”¨æ˜¯åœ¨æœåŠ¡çš„æ–¹æ³•è°ƒç”¨å‰åæ’å…¥è¿½è¸ªç‚¹ï¼Œè®°å½•spanï¼ˆåŸºæœ¬è¿½è¸ªå•å…ƒï¼‰æ•°æ®ï¼ŒåŒ…æ‹¬è¯·æ±‚çš„å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€è·¨åº¦ã€æ“ä½œç±»å‹ã€è°ƒç”¨å…³ç³»ã€ä»¥åŠç›¸å…³çš„å…ƒæ•°æ®ï¼ˆå¦‚HTTPè¯·æ±‚å¤´ã€å“åº”ç ã€é”™è¯¯ä¿¡æ¯ç­‰ï¼‰ã€‚</li></ul></li><li><p><strong>Spanä¸Traceæ¦‚å¿µ</strong>ï¼š</p><ul><li>åœ¨SkyWalkingä¸­ï¼Œä¸€ä¸ªå®Œæ•´çš„è°ƒç”¨é“¾è·¯ç§°ä¸ºä¸€ä¸ªTraceï¼ŒTraceç”±ä¸€ç³»åˆ—çš„Spanç»„æˆï¼Œæ¯ä¸ªSpanä»£è¡¨ä¸€æ¬¡æœåŠ¡é—´çš„è°ƒç”¨æˆ–ä¸€æ¬¡æœåŠ¡å†…éƒ¨çš„æ“ä½œã€‚</li><li>SpanåŒ…å«äº†æ“ä½œçš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚æœåŠ¡åç§°ã€æ“ä½œåã€å¼€å§‹å’Œç»“æŸæ—¶é—´æˆ³ã€æ‰§è¡Œè€—æ—¶ç­‰ï¼Œå¹¶ä¸”æ¯ä¸ªSpanéƒ½æœ‰ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„Trace IDå’ŒSpan IDï¼Œä»¥åŠå¯é€‰çš„Parent Span IDæ¥æ ‡è¯†è°ƒç”¨å±‚çº§å’Œçˆ¶å­å…³ç³»ã€‚</li></ul></li><li><p><strong>é‡‡æ ·ä¸ä¸ŠæŠ¥</strong>ï¼š</p><ul><li>Agentä¼šå¯¹æœåŠ¡äº§ç”Ÿçš„Spansè¿›è¡Œé‡‡æ ·ï¼Œå³æ ¹æ®é…ç½®çš„é‡‡æ ·ç­–ç•¥å†³å®šå“ªäº›Spanéœ€è¦è¢«è®°å½•å¹¶ä¸ŠæŠ¥ç»™OAPæœåŠ¡å™¨ã€‚é‡‡æ ·ç­–ç•¥æ—¢å¯ä»¥æ˜¯å…¨é‡è®°å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºäºæ¯”ä¾‹æˆ–æ¡ä»¶è§¦å‘çš„ã€‚</li><li>ä¸ŠæŠ¥çš„æ•°æ®é€šå¸¸ç»è¿‡é«˜æ•ˆçš„åºåˆ—åŒ–ä¹‹åï¼Œé€šè¿‡gRPCæˆ–è€…HTTPç­‰æ–¹å¼å‘é€ç»™OAPæœåŠ¡å™¨ã€‚</li></ul></li><li><p><strong>OAPæœåŠ¡(Observability Analysis Platform)</strong>ï¼š</p><ul><li>OAPæœåŠ¡å™¨è´Ÿè´£æ¥æ”¶æ¥è‡ªå„æœåŠ¡æ¢é’ˆçš„Spanæ•°æ®ï¼Œå°†å®ƒä»¬å­˜å‚¨åœ¨ä¸€ä¸ªé›†ä¸­çš„å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œå¦‚Elasticsearchã€H2ã€MySQLã€TiDBç­‰ã€‚</li><li>OAPè¿˜è´Ÿè´£å¯¹æ”¶é›†çš„æ•°æ®è¿›è¡Œèšåˆã€åˆ†æå’Œç´¢å¼•ï¼Œä»¥ä¾¿äºåç»­æŸ¥è¯¢å’Œå±•ç¤ºã€‚</li></ul></li><li><p><strong>è·Ÿè¸ªä¸Šä¸‹æ–‡ä¼ é€’</strong>ï¼š</p><ul><li>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒSkyWalkingé€šè¿‡ä¼ é€’è·Ÿè¸ªä¸Šä¸‹æ–‡ï¼ˆé€šå¸¸æ˜¯é€šè¿‡ThreadLocalæˆ–è€…å…¶ä»–è¯­è¨€ç‰¹æ€§çš„ä¸Šä¸‹æ–‡ä¼ æ’­æœºåˆ¶ï¼‰æ¥ä¸²è”æ•´ä¸ªè¯·æ±‚é“¾è·¯ä¸­çš„å„ä¸ªSpanï¼Œç¡®ä¿è·¨è¿›ç¨‹ã€è·¨æœåŠ¡çš„è°ƒç”¨èƒ½å¤Ÿå½¢æˆå®Œæ•´çš„è°ƒç”¨é“¾ã€‚</li></ul></li><li><p><strong>å¯è§†åŒ–å±•ç¤º</strong>ï¼š</p><ul><li>æœ€ç»ˆï¼ŒSkyWalkingæä¾›äº†ä¸€ä¸ªUIç•Œé¢ï¼Œå¯ä»¥å°†æ”¶é›†åˆ°çš„åˆ†å¸ƒå¼é“¾è·¯ä¿¡æ¯ä»¥æ‹“æ‰‘å›¾å’Œè°ƒç”¨é“¾è¯¦æƒ…ç­‰å½¢å¼å±•ç°å‡ºæ¥ï¼Œå¸®åŠ©å¼€å‘è€…å’Œè¿ç»´äººå‘˜ç›´è§‚ç†è§£ç³»ç»Ÿé—´çš„è°ƒç”¨å…³ç³»ã€è¯†åˆ«æ€§èƒ½ç“¶é¢ˆå’Œå®šä½é—®é¢˜ã€‚</li></ul></li></ol><p>é€šè¿‡ä»¥ä¸Šçš„æ–¹å¼ï¼ŒSkyWalkingå®ç°äº†è·¨è¶Šåˆ†å¸ƒå¼ç³»ç»Ÿå„ä¸ªæœåŠ¡å’Œç»„ä»¶çš„é“¾è·¯è¿½è¸ªï¼Œä½¿å¾—å¤æ‚çš„å¾®æœåŠ¡æ¶æ„ä¸­çš„è¯·æ±‚è·¯å¾„å˜å¾—é€æ˜å’Œå¯è¿½æº¯ã€‚</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 1690273757@qq.com">chenxin</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a aria-label="Spring+SpringBoot" class="vp-link nav-link prev nav-link prev" href="/technology/java/spring.html"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon iconfont icon-bxl-spring-boot" style=""></span>Spring+SpringBoot</div></a><a aria-label="kafka" class="vp-link nav-link next nav-link next" href="/technology/java/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.html"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">kafka<span class="font-icon icon iconfont icon-SpringCloud" style=""></span></div></a></nav><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><div class="wl-reaction"><div class="wl-reaction-title">ä½ è®¤ä¸ºè¿™ç¯‡æ–‡ç« æ€ä¹ˆæ ·ï¼Ÿ</div><ul class="wl-reaction-list"><!--[--><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_agree.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_look_down.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_sunglasses.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_pick_nose.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_awkward.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_sleep.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><!--]--></ul></div><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">æ˜µç§°</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">é‚®ç®±</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">ç½‘å€</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="è¯·ç•™è¨€ã€‚(å¡«å†™é‚®ç®±å¯åœ¨è¢«å›å¤æ—¶æ”¶åˆ°é‚®ä»¶æé†’)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>é¢„è§ˆ:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="è¡¨æƒ…" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="è¡¨æƒ…åŒ…"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="ä¸Šä¼ å›¾ç‰‡"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="é¢„è§ˆ"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if--> Â å­—</div><button type="button" class="wl-btn">ç™»å½•</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->æäº¤<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="æœç´¢è¡¨æƒ…åŒ…"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> è¯„è®º</div><ul class="wl-sort"><!--[--><li class="active">æŒ‰æ­£åº</li><li class="">æŒ‰å€’åº</li><li class="">æŒ‰çƒ­åº¦</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><!--v-if--></div></div><!----><!--]--></main><!--]--><!----></div><!--]--><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><canvas id="vuepress-canvas-cursor"></canvas><!--]--></div>
    <script type="module" src="/assets/app-57970fd2.js" defer></script>
  </body>
</html>
